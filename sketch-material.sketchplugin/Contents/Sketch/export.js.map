{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@skpm/fs/index.js","webpack://exports/./node_modules/@skpm/path/index.js","webpack://exports/./node_modules/@skpm/path/sketch-specifics.js","webpack://exports/./src/commands/export.js","webpack://exports/./src/common/constants.js","webpack://exports/./src/utils/global/archive.js","webpack://exports/./src/utils/index.js","webpack://exports/./src/utils/modules/array.js","webpack://exports/./src/utils/modules/class.js","webpack://exports/./src/utils/modules/color.js","webpack://exports/./src/utils/modules/doc.js","webpack://exports/./src/utils/modules/dom.js","webpack://exports/./src/utils/modules/path.js","webpack://exports/./src/utils/modules/settings.js","webpack://exports/./src/utils/modules/styles.js","webpack://exports/./src/utils/modules/symbol.js","webpack://exports/./src/utils/modules/ui.js","webpack://exports/external \"buffer\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"util\""],"names":["library","updateIndex","cachePath","Utils","getPluginCachePath","indexCachePath","path","join","fs","writeFileSync","JSON","stringify","encoding","captureLayerImage","layer","destPath","air","absoluteInfluenceRect","rect","NSMakeRect","origin","x","y","size","width","height","exportRequest","MSExportRequest","exportRequestsFromLayerAncestry_inRect_","MSImmutableLayerAncestry","ancestryWithMSLayer_","firstObject","format","scale","MSArtboardGroup","MSSymbolMaster","includeArtboardBackground","doc","saveArtboardOrSlice_toFile_","exportLayer","pageName","options","includeDependencies","document","data","Archive","archiveDataFromSketchObject","layerId","String","objectID","folder","mkdirpSync","filePath","imagePath","layerObj","type","id","name","component","Number","push","parsePageLayers","page","layers","count","layersLoop","objectEnumerator","nextObject","pages","documentData","pagesLoop","isEqualToString","pluginId","baseURL","layerSettingsPanelId","stylesPanelId","SKETCH_47_JSON_FORMAT_VERSION","stringFromData","NSString","alloc","initWithData_encoding","NSUTF8StringEncoding","dataFromString","string","stringWithString","dataUsingEncoding","wrapArchiveDataInHeader","archiveData","archiveJSONString","archiveJSData","parse","headerJSData","createArchiveHeaderJSData","root","archiveWithHeaderJSONString","object","MSImmutableLayer","new","archiveWithHeaderData","MSJSONDataArchiver","archivedDataWithHeaderAndRootObject","archiveWithHeaderJSData","sketchObjectFromArchiveJSONUsingFormatVersion","jsonString","formatVersion","MSJSONDataUnarchiver","unarchiveObjectWithString_asVersion_corruptionDetected_error","recurseThroughLayers","fn","forEach","l","getSharedStylesFromContainer","layerStyledUsed","sharedObject","sharedStyleID","immutableModelObject","symbols","MSPasteboardLayersBase","usedSymbolsInContainer_document","MSLayerArray","arrayWithLayer","sharedStyles","class","isSubclassOfClass","NSSet","symbolsDict","NSMutableDictionary","documentSymbols","getDocumentSymbols","$","allObjects","symbolID","symbol","setObject_forKey","styles","Object","assign","NSDictionary","dictionaryWithDictionary","immutableObject","archiver","setArchiveObjectIDs","archivedDataWithRootObject_error","sketchObjectFromArchiveData","NSData","jsData","err","MSKeyedUnarchiver","unarchiveObjectWithData_asVersion_corruptionDetected_error","_class","version","ArrayUtils","ClassUtils","ColorUtils","DocUtils","DomUtils","StyleUtils","SymbolUtils","UiUtils","PathUtils","SettingsUtils","find","container","returnArray","key","match","predicate","NSPredicate","predicateWithFormat","current","items","is","MSSharedStyleContainer","MSSharedTextStyleContainer","objectsSortedByName","children","queryResult","filteredArrayUsingPredicate","collection","iterator","i","item","objectAtIndex","returnValue","map","transform","result","mapObject","results","value","filter","theClass","klass","mutableSketchObject","immutableSketchObject","immutableClass","mutableClass","initWithImmutableModelObject","hexToNSColor","hex","alpha","exec","r","toHex","g","b","a","c","parseInt","length","hexToMSColor","substring","MSColor","colorWithRed_green_blue_alpha","rgbaToMSColor","rgba","replace","split","parseFloat","cssColorToMSColor","color","NSDocumentController","sharedDocumentController","currentDocument","currentPage","artboard","currentArtboard","selection","selectedLayers","allLayers","allSymbols","getRect","frame","Math","round","maxX","maxY","setX","setY","setWidth","setHeight","setConstrainProportions","val","addGroup","MSLayerGroup","addShape","MSShapeGroup","shapeWithRect","addText","text","MSTextLayer","setStringValue","removeLayer","parentGroup","NSFileManager","defaultManager","URLsForDirectory_inDomains_","NSCachesDirectory","NSUserDomainMask","pluginCacheKey","__command","pluginBundle","identifier","mode","MOPointer","init","fileManager","createDirectoryAtPath_withIntermediateDirectories_attributes_error","NSFilePosixPermissions","Error","Settings","require","hasComponentData","ele","layerSettingForKey","clearLayerMetaDataForKeys","keys","setValue_forKey_onLayer","nil","clearLayerMetaData","userInfo","settingsJSON","CONSTS","loadSettingsToWebview","browserWindow","selecitonLoop","sel","meta","k","windowObject","evaluateWebScript","getSharedTextStyleByName","allTextStyles","style","MSSharedStyle","getSharedStyleById","layerStyleWithID","textStyleWithID","getSharedLayerStyleByName","allLayerStyles","addSharedStyleObjectToDoc","layerStyles","hasTextStyle","layerTextStyles","addSharedObject","addSharedStylesToDocByName","s","initWithName_style","createAndGetSharedTextStyleFromJson","json","red","green","blue","fontFamily","font","lineHeight","fontSize","leading","alignment","spacing","paragraphSpacing","textTransform","strikethrough","underline","setFontPostscriptName","setLeading","setLineHeight","setFontSize","setTextAlignment","setTextColor","textAlignment","setCharacterSpacing","addAttribute_value","paragraphStyle","setParagraphSpacing","applyFillsToStyle","fills","fill","styleFill","addStylePartOfType","setFillType","isEnabled","applyShadowsToStyle","shadows","shadow","styleShadow","offsetX","offsetY","blurRadius","blur","spread","applyBordersToStyle","borders","border","styleBorder","thickness","position","createAndGetSharedLayerStyleFromJson","MSStyle","contextSettings","setOpacity","findSymbolByName","symbolName","targetSymbols","j","targetSymbol","findSymbolById","symbolId","symbolWithID","addSymbolToDoc","symbolDoc","symbolsPageOrCreateIfNecessary","addLayer","makeColorSymbol","colorHex","colorAlpha","colorBg","colorBgRect","enabledFills","lastObject","fillType","setColor","arrayWithLayers","addLayers","MSSymbolCreator","canCreateSymbolFromLayers","symbolInstance","createSymbolFromLayers_withName_onSymbolsPage","symbolInstanceRect","removeFromParent","message","showMessage"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA,aAAa,mBAAO,CAAC,sBAAQ;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAsD;AACrF,mCAAmC,0DAA0D;AAC7F,6BAA6B,mDAAmD;AAChF,wBAAwB,eAAe;AACvC,wBAAwB,iDAAiD;AACzE,0BAA0B,gDAAgD;AAC1E,gCAAgC,sDAAsD;AACtF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC1RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,mBAAO,CAAC,yEAAoB;;AAElD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,8BAA8B;AACpE;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,yBAAyB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,qBAAqB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,aAAa;AACvB;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,WAAW;AACX;AACA,qCAAqC;AACrC;AACA;AACA,SAAS;AACT;AACA;AACA,gDAAgD;AAChD;AACA,WAAW;AACX;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,cAAc;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AC1gBA,WAAW,mBAAO,CAAC,kBAAM;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"export.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/commands/export.js\");\n","// TODO: async. Should probably be done with NSFileHandle and some notifications\n// TODO: file descriptor. Needs to be done with NSFileHandle\nvar Buffer = require('buffer').Buffer\n\nfunction encodingFromOptions(options, defaultValue) {\n  return options && options.encoding\n    ? String(options.encoding)\n    : (\n      options\n        ? String(options)\n        : defaultValue\n    )\n}\n\nmodule.exports.constants = {\n  F_OK: 0,\n  R_OK: 4,\n  W_OK: 2,\n  X_OK: 1\n}\n\nmodule.exports.accessSync = function(path, mode) {\n  mode = mode | 0\n  var fileManager = NSFileManager.defaultManager()\n\n  switch (mode) {\n    case 0:\n      canAccess = module.exports.existsSync(path)\n      break\n    case 1:\n      canAccess = Boolean(Number(fileManager.isExecutableFileAtPath(path)))\n      break\n    case 2:\n      canAccess = Boolean(Number(fileManager.isWritableFileAtPath(path)))\n      break\n    case 3:\n      canAccess = Boolean(Number(fileManager.isExecutableFileAtPath(path))) && Boolean(Number(fileManager.isWritableFileAtPath(path)))\n      break\n    case 4:\n      canAccess = Boolean(Number(fileManager.isReadableFileAtPath(path)))\n      break\n    case 5:\n      canAccess = Boolean(Number(fileManager.isReadableFileAtPath(path))) && Boolean(Number(fileManager.isExecutableFileAtPath(path)))\n      break\n    case 6:\n      canAccess = Boolean(Number(fileManager.isReadableFileAtPath(path))) && Boolean(Number(fileManager.isWritableFileAtPath(path)))\n      break\n    case 7:\n      canAccess = Boolean(Number(fileManager.isReadableFileAtPath(path))) && Boolean(Number(fileManager.isWritableFileAtPath(path))) && Boolean(Number(fileManager.isExecutableFileAtPath(path)))\n      break\n  }\n\n  if (!canAccess) {\n    throw new Error('Can\\'t access ' + String(path))\n  }\n}\n\nmodule.exports.appendFileSync = function(file, data, options) {\n  if (!module.exports.existsSync(file)) {\n    return module.exports.writeFileSync(file, data, options)\n  }\n\n  var handle = NSFileHandle.fileHandleForWritingAtPath(file)\n  handle.seekToEndOfFile()\n\n  var encoding = encodingFromOptions(options, 'utf8')\n\n  var nsdata = Buffer.from(data, encoding === 'NSData' || encoding === 'buffer' ? undefined : encoding).toNSData()\n\n  handle.writeData(nsdata)\n}\n\nmodule.exports.chmodSync = function(path, mode) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.setAttributes_ofItemAtPath_error({\n    NSFilePosixPermissions: mode\n  }, path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.copyFileSync = function(path, dest, flags) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.copyItemAtPath_toPath_error(path, dest, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.existsSync = function(path) {\n  var fileManager = NSFileManager.defaultManager()\n  return Boolean(Number(fileManager.fileExistsAtPath(path)))\n}\n\nmodule.exports.linkSync = function(existingPath, newPath) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.linkItemAtPath_toPath_error(existingPath, newPath, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.mkdirSync = function(path, mode) {\n  mode = mode || 0o777\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error(path, false, {\n    NSFilePosixPermissions: mode\n  }, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.mkdtempSync = function(path) {\n  function makeid() {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 6; i++)\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n  }\n  var tempPath = path + makeid()\n  module.exports.mkdirSync(tempPath)\n  return tempPath\n}\n\nmodule.exports.readdirSync = function(path) {\n  var fileManager = NSFileManager.defaultManager()\n  var paths = fileManager.subpathsAtPath(path)\n  var arr = []\n  for (var i = 0; i < paths.length; i++) {\n    arr.push(String(paths[i]))\n  }\n  return arr\n}\n\nmodule.exports.readFileSync = function(path, options) {\n  var encoding = encodingFromOptions(options, 'buffer')\n  var fileManager = NSFileManager.defaultManager()\n  var data = fileManager.contentsAtPath(path)\n  var buffer = Buffer.from(data)\n\n  if (encoding === 'buffer') {\n    return buffer\n  } else if (encoding === 'NSData') {\n    return buffer.toNSData()\n  } else {\n    return buffer.toString(encoding)\n  }\n}\n\nmodule.exports.readlinkSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.destinationOfSymbolicLinkAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n\n  return String(result)\n}\n\nmodule.exports.realpathSync = function(path) {\n  return String(NSString.stringByResolvingSymlinksInPath(path))\n}\n\nmodule.exports.renameSync = function(oldPath, newPath) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.moveItemAtPath_toPath_error(oldPath, newPath, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.rmdirSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.removeItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.statSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.attributesOfItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n\n  return {\n    dev: String(result.NSFileDeviceIdentifier),\n    // ino: 48064969, The file system specific \"Inode\" number for the file.\n    mode: result.NSFileType | result.NSFilePosixPermissions,\n    nlink: Number(result.NSFileReferenceCount),\n    uid: String(result.NSFileOwnerAccountID),\n    gid: String(result.NSFileGroupOwnerAccountID),\n    // rdev: 0, A numeric device identifier if the file is considered \"special\".\n    size: Number(result.NSFileSize),\n    // blksize: 4096, The file system block size for i/o operations.\n    // blocks: 8, The number of blocks allocated for this file.\n    atimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    mtimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    ctimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    birthtimeMs: Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000,\n    atime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5), // the 0.5 comes from the node source. Not sure why it's added but in doubt...\n    mtime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    ctime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    birthtime: new Date(Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    isBlockDevice: function() { return result.NSFileType === NSFileTypeBlockSpecial },\n    isCharacterDevice: function() { return result.NSFileType === NSFileTypeCharacterSpecial },\n    isDirectory: function() { return result.NSFileType === NSFileTypeDirectory },\n    isFIFO: function() { return false },\n    isFile: function() { return result.NSFileType === NSFileTypeRegular },\n    isSocket: function() { return result.NSFileType === NSFileTypeSocket },\n    isSymbolicLink: function() { return result.NSFileType === NSFileTypeSymbolicLink },\n  }\n}\n\nmodule.exports.symlinkSync = function(target, path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.createSymbolicLinkAtPath_withDestinationPath_error(path, target, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.truncateSync = function(path, len) {\n  var hFile = NSFileHandle.fileHandleForUpdatingAtPath(sFilePath)\n  hFile.truncateFileAtOffset(len || 0)\n  hFile.closeFile()\n}\n\nmodule.exports.unlinkSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.removeItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.utimesSync = function(path, aTime, mTime) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.setAttributes_ofItemAtPath_error({\n    NSFileModificationDate: aTime\n  }, path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.writeFileSync = function(path, data, options) {\n  var encoding = encodingFromOptions(options, 'utf8')\n\n  var nsdata = Buffer.from(\n    data, encoding === 'NSData' || encoding === 'buffer' ? undefined : encoding\n  ).toNSData()\n\n  nsdata.writeToFile_atomically(path, true)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar sketchSpecifics = require('./sketch-specifics')\n\n// we only expose the posix implementation since Sketch only runs on macOS\n\nvar CHAR_FORWARD_SLASH = 47\nvar CHAR_DOT = 46\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString(path, allowAboveRoot) {\n  var res = ''\n  var lastSegmentLength = 0\n  var lastSlash = -1\n  var dots = 0\n  var code\n  for (var i = 0; i <= path.length; i += 1) {\n    if (i < path.length) code = path.charCodeAt(i)\n    else if (code === CHAR_FORWARD_SLASH) break\n    else code = CHAR_FORWARD_SLASH\n    if (code === CHAR_FORWARD_SLASH) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (\n          res.length < 2 ||\n          lastSegmentLength !== 2 ||\n          res.charCodeAt(res.length - 1) !== CHAR_DOT ||\n          res.charCodeAt(res.length - 2) !== CHAR_DOT\n        ) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/')\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = ''\n                lastSegmentLength = 0\n              } else {\n                res = res.slice(0, lastSlashIndex)\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/')\n              }\n              lastSlash = i\n              dots = 0\n              continue\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = ''\n            lastSegmentLength = 0\n            lastSlash = i\n            dots = 0\n            continue\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) res += '/..'\n          else res = '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (res.length > 0) res += '/' + path.slice(lastSlash + 1, i)\n        else res = path.slice(lastSlash + 1, i)\n        lastSegmentLength = i - lastSlash - 1\n      }\n      lastSlash = i\n      dots = 0\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots\n    } else {\n      dots = -1\n    }\n  }\n  return res\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root\n  var base =\n    pathObject.base || (pathObject.name || '') + (pathObject.ext || '')\n  if (!dir) {\n    return base\n  }\n  if (dir === pathObject.root) {\n    return dir + base\n  }\n  return dir + sep + base\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = ''\n    var resolvedAbsolute = false\n    var cwd\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i -= 1) {\n      var path\n      if (i >= 0) {\n        path = arguments[i]\n      } else {\n        if (cwd === undefined) {\n          cwd = posix.dirname(sketchSpecifics.cwd())\n        }\n        path = cwd\n      }\n\n      path = sketchSpecifics.getString(path, 'path')\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue\n      }\n\n      resolvedPath = path + '/' + resolvedPath\n      resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute)\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) return '/' + resolvedPath\n      else return '/'\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath\n    } else {\n      return '.'\n    }\n  },\n\n  normalize: function normalize(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    if (path.length === 0) return '.'\n\n    var isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    var trailingSeparator =\n      path.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH\n\n    // Normalize the path\n    path = normalizeString(path, !isAbsolute)\n\n    if (path.length === 0 && !isAbsolute) path = '.'\n    if (path.length > 0 && trailingSeparator) path += '/'\n\n    if (isAbsolute) return '/' + path\n    return path\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    return path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH\n  },\n\n  join: function join() {\n    if (arguments.length === 0) return '.'\n    var joined\n    for (var i = 0; i < arguments.length; i += 1) {\n      var arg = arguments[i]\n      arg = sketchSpecifics.getString(arg, 'path')\n      if (arg.length > 0) {\n        if (joined === undefined) joined = arg\n        else joined += '/' + arg\n      }\n    }\n    if (joined === undefined) return '.'\n    return posix.normalize(joined)\n  },\n\n  relative: function relative(from, to) {\n    from = sketchSpecifics.getString(from, 'from path')\n    to = sketchSpecifics.getString(to, 'to path')\n\n    if (from === to) return ''\n\n    from = posix.resolve(from)\n    to = posix.resolve(to)\n\n    if (from === to) return ''\n\n    // Trim any leading backslashes\n    var fromStart = 1\n    for (; fromStart < from.length; fromStart += 1) {\n      if (from.charCodeAt(fromStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var fromEnd = from.length\n    var fromLen = fromEnd - fromStart\n\n    // Trim any leading backslashes\n    var toStart = 1\n    for (; toStart < to.length; toStart += 1) {\n      if (to.charCodeAt(toStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var toEnd = to.length\n    var toLen = toEnd - toStart\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen\n    var lastCommonSep = -1\n    var i = 0\n    for (; i <= length; i += 1) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1)\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i)\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0\n          }\n        }\n        break\n      }\n      var fromCode = from.charCodeAt(fromStart + i)\n      var toCode = to.charCodeAt(toStart + i)\n      if (fromCode !== toCode) break\n      else if (fromCode === CHAR_FORWARD_SLASH) lastCommonSep = i\n    }\n\n    var out = ''\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; i += 1) {\n      if (i === fromEnd || from.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n        if (out.length === 0) out += '..'\n        else out += '/..'\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0) return out + to.slice(toStart + lastCommonSep)\n    else {\n      toStart += lastCommonSep\n      if (to.charCodeAt(toStart) === CHAR_FORWARD_SLASH) toStart += 1\n      return to.slice(toStart)\n    }\n  },\n\n  toNamespacedPath: function toNamespacedPath(path) {\n    // Non-op on posix systems\n    return path\n  },\n\n  dirname: function dirname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    if (path.length === 0) return '.'\n    var code = path.charCodeAt(0)\n    var hasRoot = code === CHAR_FORWARD_SLASH\n    var end = -1\n    var matchedSlash = true\n    for (var i = path.length - 1; i >= 1; i -= 1) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        if (!matchedSlash) {\n          end = i\n          break\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.'\n    if (hasRoot && end === 1) return '//'\n    return path.slice(0, end)\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined)\n      ext = sketchSpecifics.getString(ext, 'ext')\n    path = sketchSpecifics.getString(path, 'path')\n\n    var start = 0\n    var end = -1\n    var matchedSlash = true\n    var i\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return ''\n      var extIdx = ext.length - 1\n      var firstNonSlashEnd = -1\n      for (i = path.length - 1; i >= 0; i -= 1) {\n        var code = path.charCodeAt(i)\n        if (code === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false\n            firstNonSlashEnd = i + 1\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1\n              end = firstNonSlashEnd\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd\n      else if (end === -1) end = path.length\n      return path.slice(start, end)\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false\n          end = i + 1\n        }\n      }\n\n      if (end === -1) return ''\n      return path.slice(start, end)\n    }\n  },\n\n  extname: function extname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      return ''\n    }\n    return path.slice(startDot, end)\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new Error('pathObject should be an Object')\n    }\n    return _format('/', pathObject)\n  },\n\n  parse: function parse(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' }\n    if (path.length === 0) return ret\n    var code = path.charCodeAt(0)\n    var isAbsolute = code === CHAR_FORWARD_SLASH\n    var start\n    if (isAbsolute) {\n      ret.root = '/'\n      start = 1\n    } else {\n      start = 0\n    }\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    var i = path.length - 1\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end)\n        else ret.base = ret.name = path.slice(startPart, end)\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot)\n        ret.base = path.slice(1, end)\n      } else {\n        ret.name = path.slice(startPart, startDot)\n        ret.base = path.slice(startPart, end)\n      }\n      ret.ext = path.slice(startDot, end)\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1)\n    else if (isAbsolute) ret.dir = '/'\n\n    return ret\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null,\n}\n\nposix.posix = posix\n\nmodule.exports = posix\n","var util = require('util')\n\nmodule.exports.getString = function getString(path, argumentName) {\n  if (!util.isString(path)) {\n    // let's make a special case for NSURL\n    if (util.getNativeClass(path) === 'NSURL') {\n      return String(path.path().copy())\n    }\n    throw new Error(argumentName + ' should be a string. Got ' + typeof path + ' instead.')\n  }\n  return String(path)\n}\n\nmodule.exports.cwd = function cwd() {\n  if (typeof __command !== 'undefined' && __command.script() && __command.script().URL()) {\n    return String(__command.script().URL().path().copy())\n  }\n  return String(MSPluginManager.defaultPluginURL().path().copy())\n}\n","import fs from \"@skpm/fs\";\nimport path from \"@skpm/path\";\n\nimport Utils from \"../utils/index\";\nimport Archive from \"../utils/global/archive\";\n\nlet library = {};\n\nconst updateIndex = function () {\n  const cachePath = Utils.getPluginCachePath();\n  let indexCachePath = path.join(cachePath, 'index.json');\n\n  fs.writeFileSync(indexCachePath, JSON.stringify(library), {\n    encoding: 'utf8'\n  });\n}\n\nconst captureLayerImage = function (layer, destPath) {\n  let air = layer.absoluteInfluenceRect();\n  let rect = NSMakeRect(air.origin.x, air.origin.y, air.size.width, air.size.height);\n  let exportRequest = MSExportRequest.exportRequestsFromLayerAncestry_inRect_(\n    MSImmutableLayerAncestry.ancestryWithMSLayer_(layer),\n    rect // we pass this to avoid trimming\n  ).firstObject();\n  exportRequest.format = 'png';\n  exportRequest.scale = 2;\n  if (!(layer instanceof MSArtboardGroup || layer instanceof MSSymbolMaster)) {\n    exportRequest.includeArtboardBackground = false;\n  }\n  // exportRequest.shouldTrim = false;\n  Utils.doc().saveArtboardOrSlice_toFile_(exportRequest, destPath);\n}\n\nconst exportLayer = function (layer, pageName) {\n  const options = {\n    includeDependencies: true,\n    document: Utils.doc()\n  }\n  const data = Archive.archiveDataFromSketchObject(layer, options);\n  const cachePath = Utils.getPluginCachePath();\n\n\n  const layerId = String(layer.objectID());\n  const folder = path.join(cachePath, pageName)\n  Utils.mkdirpSync(folder);\n  const filePath = path.join(folder, layerId + '.json');\n  const imagePath = path.join(folder, layerId + '.png');\n\n  const layerObj = {\n    type: 'layer',\n    id: layerId,\n    name: layer.name(),\n    component: pageName,\n    data: '/static/l/gm/' + pageName + '/' + layerId + '.json',\n    imagePath: '/static/l/gm/' + pageName + '/' + layerId + '.png',\n    width: Number(layer.absoluteInfluenceRect().size.width),\n    height: Number(layer.absoluteInfluenceRect().size.height),\n  }\n\n  captureLayerImage(layer, imagePath);\n\n  fs.writeFileSync(filePath, data, {\n    encoding: 'NSData'\n  });\n\n  if (!library[pageName]) library[pageName] = [];\n\n  library[pageName].push(layerObj);\n}\n\n\nconst parsePageLayers = function (page) {\n  const layers = page.layers();\n  if (layers.count() > 0) {\n    const layersLoop = layers.objectEnumerator();\n    let layer = null;\n    while (layer = layersLoop.nextObject()) {\n      exportLayer(layer, \"\" + page.name());\n    }\n  }\n}\n\n\nexport default function () {\n  const pages = Utils.doc().documentData().pages();\n  const pagesLoop = pages.objectEnumerator();\n  let page = null;\n  while (page = pagesLoop.nextObject()) {\n    if (page.name().isEqualToString('Symbols')) continue;\n    parsePageLayers(page);\n  }\n  updateIndex();\n}\n","export default {\n  pluginId: \"com.google.material2.active\",\n  // baseURL: 'https://google-com-sketch-material.firebaseapp.com/',\n  baseURL: 'http://localhost:8082/',\n  layerSettingsPanelId: 'com.gsid.sketch.material.layer.settings',\n  stylesPanelId: 'com.gsid.sketch.material.styles.13121'\n}\n","import doc from '../modules/doc';\nimport $ from '../modules/array';\n\nconst SKETCH_47_JSON_FORMAT_VERSION = 95;\nexport default {\n  stringFromData(data) {\n    return NSString.alloc().initWithData_encoding(data, NSUTF8StringEncoding);\n  },\n\n  dataFromString(string) {\n    return NSString.stringWithString(string).dataUsingEncoding(NSUTF8StringEncoding);\n  },\n\n  wrapArchiveDataInHeader(archiveData) {\n    const archiveJSONString = this.stringFromData(archiveData);\n    const archiveJSData = JSON.parse(archiveJSONString);\n    const headerJSData = this.createArchiveHeaderJSData();\n    headerJSData.root = archiveJSData;\n    const archiveWithHeaderJSONString = JSON.stringify(headerJSData);\n    return this.dataFromString(archiveWithHeaderJSONString);\n  },\n\n  createArchiveHeaderJSData() {\n    // Creating a header directly with MSArchiveHeader.new()\n    // results in a header with no properties --- not what we\n    // want. Instead, export a stub object and use the header\n    // from that.\n    const object = MSImmutableLayer.new();\n    const archiveWithHeaderData = MSJSONDataArchiver.archivedDataWithHeaderAndRootObject(object);\n    const archiveWithHeaderJSONString = this.stringFromData(archiveWithHeaderData);\n    const archiveWithHeaderJSData = JSON.parse(archiveWithHeaderJSONString);\n    delete archiveWithHeaderJSData.root;\n    return archiveWithHeaderJSData;\n  },\n\n  // Unarchive with a known version of the JSON format.\n  sketchObjectFromArchiveJSONUsingFormatVersion(jsonString, formatVersion) {\n    return MSJSONDataUnarchiver.unarchiveObjectWithString_asVersion_corruptionDetected_error(\n      jsonString,\n      formatVersion,\n      null,\n      null\n    );\n  },\n\n  recurseThroughLayers(root, fn) {\n    fn(root)\n    if (root.layers && root.layers()) {\n      root.layers().forEach(l => this.recurseThroughLayers(l, fn))\n    }\n  },\n\n  getSharedStylesFromContainer(layer) {\n    let layerStyledUsed = {};\n    this.recurseThroughLayers(layer, l => {\n      let sharedObject = l.sharedObject();\n      if (sharedObject) {\n        layerStyledUsed[\"\" + l.sharedStyleID()] = sharedObject.immutableModelObject();\n      }\n    });\n    return layerStyledUsed;\n  },\n\n  archiveDataFromSketchObject(object, options) {\n    if (options && options.includeDependencies) {\n      if (!options.document) {\n        throw 'Options must include \"document\" when \"includeDependencies\" is true';\n      }\n      const documentData = options.document.documentData();\n\n      let symbols = MSPasteboardLayersBase.usedSymbolsInContainer_document(\n        MSLayerArray.arrayWithLayer(object),\n        documentData\n      );\n\n      let sharedStyles = {};\n\n      // In Sketch 48 the symbols are returned as a set of\n      // ids, but what we need is a map of those ids to the\n      // symbols themselves.\n      if (symbols.class().isSubclassOfClass(NSSet)) {\n        const symbolsDict = NSMutableDictionary.new();\n        const documentSymbols = doc.getDocumentSymbols();\n        $.forEach(symbols.allObjects(), (symbolID) => {\n          const symbol = documentSymbols[symbolID].immutableModelObject();\n          symbolsDict.setObject_forKey(symbol, symbolID);\n          const styles = this.getSharedStylesFromContainer(documentSymbols[symbolID]);\n          sharedStyles = Object.assign(sharedStyles, styles)\n        });\n        symbols = symbolsDict;\n      }\n\n      object = NSDictionary.dictionaryWithDictionary({\n        layers: [object.immutableModelObject()],\n        symbols: symbols,\n        sharedStyles: sharedStyles\n      });\n\n    }\n\n    const immutableObject = object.immutableModelObject();\n\n    const archiver = MSJSONDataArchiver.new();\n    archiver.setArchiveObjectIDs(true);\n    const archiveData = archiver.archivedDataWithRootObject_error(immutableObject, null);\n\n    return this.wrapArchiveDataInHeader(archiveData);\n  },\n\n  sketchObjectFromArchiveData(archiveData) {\n    if (archiveData && archiveData.class().isSubclassOfClass(NSData)) {\n      const jsonString = this.stringFromData(archiveData);\n\n      // The default format version to use is the one exported\n      // by Sketch 47. This is the last version for which we\n      // did not store the format version so we would know\n      // what to use when unarchiving. This is not exact\n      // because of course customers do not always upgrade at\n      // the same time, but because of backwards compatibility\n      // going back several format versions, it is fine.\n      var formatVersion = SKETCH_47_JSON_FORMAT_VERSION;\n\n      var jsData;\n      try {\n        jsData = JSON.parse(jsonString);\n      } catch (err) {\n        jsData = null; // No-op.\n      }\n\n      if (!jsData) {\n        // Format is not JSON, use the keyed unarchiver.\n        return MSKeyedUnarchiver.unarchiveObjectWithData_asVersion_corruptionDetected_error(\n          archiveData,\n          formatVersion,\n          null,\n          null\n        );\n      }\n\n      if (jsData._class === 'MSArchiveHeader') {\n        // If there is a wrapping header, take the format\n        // version from it.\n        formatVersion = jsData.version;\n\n        // Also unwrap the archive data from the header\n        // because the header throws Sketch off even though it\n        // contains the correct version information.\n        jsData = jsData.root;\n      }\n\n      return this.sketchObjectFromArchiveJSONUsingFormatVersion(\n        JSON.stringify(jsData),\n        formatVersion\n      );\n\n    } else {\n      // Object has already been unarchived.\n      return archiveData;\n    }\n  },\n\n}\n","import ArrayUtils from './modules/array'\nimport ClassUtils from './modules/class'\nimport ColorUtils from './modules/color'\nimport DocUtils from './modules/doc'\nimport DomUtils from './modules/dom'\nimport StyleUtils from './modules/styles'\nimport SymbolUtils from './modules/symbol'\nimport UiUtils from './modules/ui'\nimport PathUtils from './modules/path'\nimport SettingsUtils from './modules/settings'\n\nconst Utils = Object.assign({},\n  ArrayUtils,\n  ClassUtils,\n  ColorUtils,\n  DocUtils,\n  DomUtils,\n  StyleUtils,\n  SymbolUtils,\n  UiUtils,\n  PathUtils,\n  SettingsUtils\n)\n\nexport default Utils;\n","import ClassUtils from \"./class\";\n\nexport default {\n  find(format, container, returnArray) {\n    if (!format || !format.key || !format.match) {\n      return false;\n    }\n    var predicate = NSPredicate.predicateWithFormat(format.key, format.match),\n      container = container || this.current,\n      items;\n\n    if (container.pages) {\n      items = container.pages();\n    } else if (\n      ClassUtils.is(container, MSSharedStyleContainer) ||\n      ClassUtils.is(container, MSSharedTextStyleContainer)\n    ) {\n      items = container.objectsSortedByName();\n    } else if (container.children) {\n      items = container.children();\n    } else {\n      items = container;\n    }\n\n    var queryResult = items.filteredArrayUsingPredicate(predicate);\n\n    if (returnArray) return queryResult;\n\n    if (queryResult.count() == 1) {\n      return queryResult[0];\n    } else if (queryResult.count() > 0) {\n      return queryResult;\n    } else {\n      return false;\n    }\n  },\n\n  forEach(collection, iterator) {\n    for (var i = 0; i < collection.count(); i++) {\n      const item = collection.objectAtIndex(i);\n      const returnValue = iterator(item, i, collection);\n      if (returnValue === false) {\n        break;\n      }\n    }\n  },\n\n  map(collection, transform) {\n    const result = [];\n    this.forEach(collection, function (item, i, collection) {\n      result.push(transform(item, i, collection));\n    });\n    return result;\n  },\n\n  mapObject(collection, transform) {\n    const results = {};\n    this.forEach(collection, function (item, i, collection) {\n      const result = transform(item, i, collection);\n      const key = result[0];\n      const value = result[1];\n      results[key] = value;\n    });\n    return results;\n  },\n\n  find(collection, predicate) {\n    var result;\n    this.forEach(collection, function (item, i, collection) {\n      if (predicate(item, i, collection)) {\n        result = item;\n        return false;\n      }\n    });\n    return result;\n  },\n\n  filter(collection, predicate) {\n    const result = [];\n    this.forEach(collection, function (item, i, collection) {\n      if (predicate(item, i, collection)) {\n        result.push(item);\n      }\n    });\n    return result;\n  }\n};\n","export default {\n  is: function (layer, theClass) {\n    if (!layer) return false;\n    var klass = layer.class();\n    return klass === theClass;\n  },\n  mutableSketchObject(immutableSketchObject) {\n    if (immutableSketchObject && immutableSketchObject.class) {\n      const immutableClass = immutableSketchObject.class();\n      if (immutableClass.mutableClass) {\n        const mutableClass = immutableClass.mutableClass();\n        return mutableClass.new().initWithImmutableModelObject(\n          immutableSketchObject\n        );\n      }\n    }\n  }\n};\n","export default {\n  hexToNSColor: function(hex, alpha) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? {\n          r: this.toHex(result[1]) / 255,\n          g: this.toHex(result[2]) / 255,\n          b: this.toHex(result[3]) / 255,\n          a: alpha || 1\n        }\n      : null;\n  },\n  toHex: function(c) {\n    var hex = parseInt(c, 16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n  },\n  hexToMSColor(hex) {\n    var r = parseInt(hex.substring(1, 3), 16) / 255,\n      g = parseInt(hex.substring(3, 5), 16) / 255,\n      b = parseInt(hex.substring(5, 7), 16) / 255,\n      a = 1;\n    return MSColor.colorWithRed_green_blue_alpha(r, g, b, a);\n  },\n  rgbaToMSColor: function(rgba) {\n    rgba = rgba.replace(\"rgba(\", \"\").replace(\")\", \"\");\n    rgba = rgba.split(\",\");\n\n    var r = parseFloat(rgba[0]) / 255,\n      g = parseFloat(rgba[1]) / 255,\n      b = parseFloat(rgba[2]) / 255,\n      a = parseFloat(rgba[3]);\n\n    return MSColor.colorWithRed_green_blue_alpha(r, g, b, a);\n  },\n  cssColorToMSColor: function(color) {\n    if (color.type == \"hex\") {\n      return this.hexToMSColor(color.value);\n    }\n    if (color.type == \"rgba\") {\n      return this.rgbaToMSColor(color.value);\n    }\n  }\n};\n","import $ from './array';\n\nexport default {\n  doc() {\n    const document = NSDocumentController.sharedDocumentController().currentDocument();\n    return document;\n  },\n  current() {\n    const doc = this.doc(),\n      page = doc.currentPage(),\n      artboard = page.currentArtboard();\n\n    return artboard || page;\n  },\n  selection() {\n    return this.doc()\n      .selectedLayers()\n      .layers();\n  },\n  allLayers() {\n    return this.current().children();\n  },\n  getDocumentSymbols() {\n    const symbols = this.doc().documentData().allSymbols();\n    return $.mapObject(symbols, function (symbol) {\n      return [symbol.symbolID(), symbol];\n    });\n  }\n};\n","export default {\n  getRect: function(layer) {\n    var rect = layer.frame();\n    return {\n      x: Math.round(rect.x()),\n      y: Math.round(rect.y()),\n      width: Math.round(rect.width()),\n      height: Math.round(rect.height()),\n      maxX: Math.round(rect.x() + rect.width()),\n      maxY: Math.round(rect.y() + rect.height()),\n      setX(x) {\n        rect.setX(x);\n        this.x = x;\n        this.maxX = this.x + this.width;\n      },\n      setY(y) {\n        rect.setY(y);\n        this.y = y;\n        this.maxY = this.y + this.height;\n      },\n      setWidth(width) {\n        rect.setWidth(width);\n        this.width = width;\n        this.maxX = this.x + this.width;\n      },\n      setHeight(height) {\n        rect.setHeight(height);\n        this.height = height;\n        this.maxY = this.y + this.height;\n      },\n      setConstrainProportions(val) {\n        rect.setConstrainProportions(val);\n      }\n    };\n  },\n  addGroup: function() {\n    return MSLayerGroup.new();\n  },\n  addShape: function() {\n    return MSShapeGroup.shapeWithRect(NSMakeRect(0, 0, 100, 100));\n  },\n  addText: function(container, string) {\n    var text = MSTextLayer.new();\n    text.setStringValue(string || \"Text\");\n    return text;\n  },\n  removeLayer: function(layer) {\n    var container = layer.parentGroup();\n    if (container) container.removeLayer(layer);\n  }\n};\n","import path from '@skpm/path';\n\nexport default {\n  getPluginCachePath() {\n    let cachePath = String(NSFileManager.defaultManager().URLsForDirectory_inDomains_(\n      NSCachesDirectory,\n      NSUserDomainMask)[0].path());\n    let pluginCacheKey = String(__command.pluginBundle().identifier()); // TODO: escape if needed\n    // return path.join(cachePath, pluginCacheKey);\n    return '/Users/gsid/work/projects/side/sketch-material/internal/gen/public/static/l/gm';\n  },\n  mkdirpSync(path, mode) {\n    mode = mode || 0o777;\n    let err = MOPointer.alloc().init();\n    let fileManager = NSFileManager.defaultManager();\n    fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error(path, true, {\n      NSFilePosixPermissions: mode\n    }, err);\n\n    if (err.value() !== null) {\n      throw new Error(err.value());\n    }\n  }\n}\n","var Settings = require(\"sketch/settings\");\nimport CONSTS from '../../common/constants';\n\nexport default {\n  hasComponentData(ele) {\n    return Settings.layerSettingForKey(ele, 'component');\n  },\n  clearLayerMetaDataForKeys(ele, keys) {\n    keys.forEach((key) => {\n      // Settings.setLayerSettingForKey(ele, key, undefined);\n      __command.setValue_forKey_onLayer(nil, key, ele);\n    })\n  },\n  clearLayerMetaData(ele) {\n    if (!ele.userInfo()) return;\n    const settingsJSON = ele.userInfo()[CONSTS.pluginId] || [];\n    const keys = Object.keys(settingsJSON);\n    this.clearLayerMetaDataForKeys(ele, keys);\n  },\n  loadSettingsToWebview(selection, browserWindow) {\n    var selecitonLoop = selection.objectEnumerator(),\n      sel;\n\n    while ((sel = selecitonLoop.nextObject())) {\n      var settingsJSON = sel.userInfo()[CONSTS.pluginId] || [];\n\n      const meta = Object.keys(settingsJSON).map((k) => {\n        return {\n          key: k,\n          value: Settings.layerSettingForKey(sel, k)\n        };\n      });\n\n      browserWindow.windowObject.evaluateWebScript(\n        `window.vm.$store.state.layerMetadata=${JSON.stringify(meta)};`\n      );\n    }\n  }\n\n}\n","import ClassUtils from \"./class\";\nimport DocUtils from \"./doc\";\nimport DomUtils from \"./dom\";\nimport ArrayUtils from \"./array\";\nimport ColorUtils from \"./color\";\n\nexport default {\n  getSharedTextStyleByName(name) {\n    var sharedStyles = DocUtils.doc()\n      .documentData()\n      .allTextStyles();\n    var style = ArrayUtils.find({\n        key: \"(name != NULL) && (name == %@)\",\n        match: name\n      },\n      sharedStyles\n    );\n    style = !style || ClassUtils.is(style, MSSharedStyle) ? style : style[0];\n    return style;\n  },\n  getSharedStyleById(id) {\n    let documentData = DocUtils.doc().documentData();\n    let style = documentData.layerStyleWithID(id) || documentData.textStyleWithID(id);\n    return style;\n  },\n  getSharedLayerStyleByName: function (name) {\n    var sharedStyles = DocUtils.doc()\n      .documentData()\n      .allLayerStyles();\n    var style = ArrayUtils.find({\n        key: \"(name != NULL) && (name == %@)\",\n        match: name\n      },\n      sharedStyles\n    );\n    style = !style || ClassUtils.is(style, MSSharedStyle) ? style : style[0];\n    return style;\n  },\n  addSharedStyleObjectToDoc(style) {\n    let container = DocUtils.doc()\n      .documentData()\n      .layerStyles();\n\n    if (style.style().hasTextStyle()) {\n      container = DocUtils.doc().documentData().layerTextStyles();\n    }\n\n    container.addSharedObject(style);\n  },\n  addSharedStylesToDocByName(name, style, type) {\n    let container = DocUtils.doc()\n      .documentData()\n      .layerTextStyles();\n    if (type == \"layer\") {\n      container = DocUtils.doc()\n        .documentData()\n        .layerStyles();\n    }\n    const s = MSSharedStyle.alloc().initWithName_style(name, style);\n    container.addSharedObject(s);\n  },\n  createAndGetSharedTextStyleFromJson(name, json) {\n    var style = this.getSharedTextStyleByName(name);\n\n    if (style == 0 && json.color) {\n      var color = MSColor.colorWithRed_green_blue_alpha(\n          json.color.red,\n          json.color.green,\n          json.color.blue,\n          json.color.alpha\n        ),\n        fontFamily = json.font || \"Roboto\",\n        lineHeight = json.lineHeight || 15,\n        fontSize = json.size || 13,\n        leading = json.leading || 0,\n        alignment = json.alignment || 0,\n        spacing = json.spacing || 0,\n        paragraphSpacing = json.paragraphSpacing || 0,\n        textTransform = json.textTransform || 0,\n        strikethrough = json.strikethrough || 0,\n        underline = json.underline || 0,\n        text = this.addText(this.page);\n\n      text.setFontPostscriptName(fontFamily);\n      text.setLeading(leading);\n      text.setLineHeight(lineHeight);\n      text.setFontSize(fontSize);\n      text.setTextAlignment(alignment);\n      text.setTextColor(color);\n      text.textAlignment = alignment;\n      text.setCharacterSpacing(spacing);\n      text.addAttribute_value(\n        \"MSAttributedStringTextTransformAttribute\",\n        textTransform\n      );\n\n      var paragraphStyle = text.paragraphStyle();\n      paragraphStyle.setParagraphSpacing(paragraphSpacing);\n      text.addAttribute_value(\"NSParagraphStyle\", paragraphStyle);\n      text.addAttribute_value(\"NSStrikethrough\", strikethrough);\n      text.addAttribute_value(\"NSUnderline\", underline);\n\n      style = text.style();\n\n      this.addSharedStylesToDocByName(name, style, \"text\");\n      DomUtils.removeLayer(text);\n    }\n\n    return this.getSharedTextStyleByName(name);\n  },\n\n  applyFillsToStyle(style, fills) {\n    for (var i = 0; i < fills.length; i++) {\n      var fill = fills[i];\n      var color = ColorUtils.cssColorToMSColor(fill.color);\n      var styleFill = style.addStylePartOfType(0);\n      styleFill.setFillType(fill.type);\n      styleFill.color = color;\n      styleFill.isEnabled = true;\n    }\n  },\n\n  applyShadowsToStyle(style, shadows) {\n    for (var i = 0; i < shadows.length; i++) {\n      var shadow = shadows[i];\n      var color = ColorUtils.cssColorToMSColor(shadow.color);\n      var styleShadow = style.addStylePartOfType(2);\n\n      styleShadow.offsetX = shadow.x;\n      styleShadow.offsetY = shadow.y;\n      styleShadow.color = color;\n      styleShadow.blurRadius = shadow.blur;\n      styleShadow.spread = shadow.spread;\n      styleShadow.isEnabled = true;\n    }\n  },\n\n  applyBordersToStyle(style, borders) {\n    for (var i = 0; i < borders.length; i++) {\n      var border = borders[i];\n      var color = ColorUtils.cssColorToMSColor(border.color);\n      var styleBorder = style.addStylePartOfType(1);\n\n      styleBorder.color = color;\n      styleBorder.thickness = border.thickness;\n      styleBorder.position = border.position;\n    }\n  },\n\n  createAndGetSharedLayerStyleFromJson(name, json) {\n    var style = this.getSharedLayerStyleByName(name);\n\n    if (style == 0) {\n      style = MSStyle.alloc().init();\n      if (json.fills) this.applyFillsToStyle(style, json.fills);\n      if (json.shadows) this.applyShadowsToStyle(style, json.shadows);\n      if (json.borders) this.applyBordersToStyle(style, json.borders);\n      style.contextSettings().setOpacity(1);\n      this.addSharedStylesToDocByName(name, style, \"layer\");\n    }\n\n    return this.getSharedLayerStyleByName(name);\n  }\n};\n","import DocUtils from './doc';\nimport DomUtils from './dom';\n\nexport default {\n  findSymbolByName(symbolName) {\n    var targetSymbols = DocUtils.doc()\n      .documentData()\n      .allSymbols();\n    for (var j = 0; j < targetSymbols.count(); j++) {\n      var targetSymbol = targetSymbols.objectAtIndex(j);\n      if (targetSymbol.name().isEqualToString(symbolName)) {\n        return targetSymbol;\n      }\n    }\n    return false;\n  },\n  findSymbolById(symbolId) {\n    return DocUtils.doc().documentData().symbolWithID(symbolId);\n  },\n  addSymbolToDoc(symbol) {\n    let symbolDoc = DocUtils.doc()\n      .documentData()\n      .symbolsPageOrCreateIfNecessary();\n    symbolDoc.addLayer(symbol);\n  },\n  makeColorSymbol: function (color, colorHex, colorAlpha, name) {\n    if (this.findSymbolByName(name)) {\n      return;\n    }\n\n    DocUtils.doc()\n      .documentData()\n      .symbolsPageOrCreateIfNecessary();\n\n    var colorBg = DomUtils.addShape();\n    var colorBgRect = DomUtils.getRect(colorBg);\n\n    colorBgRect.setHeight(10);\n    colorBgRect.setWidth(10);\n\n    if (colorBg.class() == \"MSShapeGroup\") {\n      var fills = colorBg.style().enabledFills();\n      if (fills.count() > 0 && fills.lastObject().fillType() == 0) {\n        fills.lastObject().setColor(color);\n      } else {\n        var fill = colorBg.style().addStylePartOfType(0);\n        fill.setFillType(0);\n        fill.setColor(color);\n      }\n    }\n\n    var layers = MSLayerArray.arrayWithLayers([colorBg]);\n\n    DocUtils.current().addLayers(layers);\n\n    if (MSSymbolCreator.canCreateSymbolFromLayers(layers)) {\n      var symbolName = name;\n      var symbolInstance = MSSymbolCreator.createSymbolFromLayers_withName_onSymbolsPage(\n        layers,\n        symbolName,\n        true\n      );\n      var symbolInstanceRect = DomUtils.getRect(symbolInstance);\n      symbolInstanceRect.setConstrainProportions(true);\n      symbolInstance.removeFromParent();\n    }\n  }\n};\n","import DocUtils from \"./doc\";\n\nexport default {\n  message(message) {\n    DocUtils.doc().showMessage(message);\n  }\n};\n","module.exports = require(\"buffer\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"util\");"],"sourceRoot":""}