{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@skpm/path/index.js","webpack://exports/./node_modules/@skpm/path/sketch-specifics.js","webpack://exports/./src/common/constants.js","webpack://exports/./src/components/color.js","webpack://exports/./src/components/components.js","webpack://exports/./src/components/data.js","webpack://exports/./src/components/elevations.js","webpack://exports/./src/components/icons.js","webpack://exports/./src/components/metadata.js","webpack://exports/./src/components/type.js","webpack://exports/./src/panels/settings.js","webpack://exports/./src/ui/panel.js","webpack://exports/./src/utils/global/archive.js","webpack://exports/./src/utils/global/first-mouse.js","webpack://exports/./src/utils/global/mocha-js-delegate.js","webpack://exports/./src/utils/index.js","webpack://exports/./src/utils/modules/array.js","webpack://exports/./src/utils/modules/class.js","webpack://exports/./src/utils/modules/color.js","webpack://exports/./src/utils/modules/doc.js","webpack://exports/./src/utils/modules/dom.js","webpack://exports/./src/utils/modules/path.js","webpack://exports/./src/utils/modules/settings.js","webpack://exports/./src/utils/modules/styles.js","webpack://exports/./src/utils/modules/symbol.js","webpack://exports/./src/utils/modules/ui.js","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"util\""],"names":["pluginId","baseURL","layerSettingsPanelId","stylesPanelId","_setBorderColor","layer","color","layerClass","class","borders","style","enabledBorders","count","lastObject","fillType","setColor","border","addStylePartOfType","setFillType","setPosition","setThickness","_fillIcon","symbolInstance","rawColor","Utils","makeColorSymbol","name","selectedSymbol","findSymbolByName","overridePoints","forEach","overridePoint","layerName","setValue_forOverridePoint_","symbolID","isSelected","select_byExtendingSelection_showSelection","_setFillColor","fills","enabledFills","fill","setTextColor","_applyColor","doc","NSDocumentController","sharedDocumentController","currentDocument","selection","selectedLayers","layers","message","selecitonLoop","objectEnumerator","sel","nextObject","nsColor","startsWith","hexToMSColor","rgbaToMSColor","type","_addGlobalColors","colors","MSColors","i","length","push","MSColor","colorWithRed_green_blue_alpha","red","green","blue","alpha","app","NSApp","delegate","assets","globalAssets","setColors","inspectorController","closeAnyColorPopover","refreshCurrentDocument","reloadInspector","_addGlobalSymbols","colorGroups","group","clr","_pickColor","webView","btn","BCMagnifierButton","alloc","initWithFrame","NSZeroRect","coscript","pushAsCurrentCOScript","setCOSJSTargetFunction","sender","pickColor","hexValue","immutableModelObject","windowScriptObject","evaluateWebScript","performClick","context","applyColor","addGlobalColors","addGlobalSymbols","_convertImgToLayer","layerData","url","CONST","data","componentNSUrl","NSURL","URLWithString","componentData","NSData","dataWithContentsOfURL","component","Archive","sketchObjectFromArchiveData","droppedElement","firstLayer","droppedEleRect","getRect","e","mutableSketchObject","setObjectID","MSModelObjectCommon","generateObjectID","newLayerRect","setX","x","setY","y","current","addLayers","removeLayer","symbolKeys","Object","keys","symbols","symbol","existingSymbol","findSymbolById","objectID","addSymbolToDoc","styleKeys","sharedStyles","existingSharedStyle","getSharedStyleById","addSharedStyleObjectToDoc","convertImgToLayer","shuffle","array","currentIndex","temporaryValue","randomIndex","Math","floor","random","applyFakeData","fakedata","is","MSTextLayer","setStringValue","applyElevation","elevation","elevationName","createAndGetSharedLayerStyleFromJson","target","sharedStyle","convertSvgToSymbol","replaceColor","colorValue","r","g","b","a","prefix","ColorName","colorName","colorHex","colorAlpha","newSymbol","newSymbolInstance","newSymbolRect","setConstrainProportions","isGlif","colorTHex","hexToNSColor","colorBlack","blackSymbol","blackSymbolInstance","setName","sRect","setHeight","setWidth","draggedLayer","subLayers","j","hasEnabledFill","removeFromParent","removeAllStyleFills","hasClippingMask","MSSymbolCreator","createSymbolFromLayers_withName_onSymbolsPage","symbolInstanceRect","Settings","require","updateLayerMetadata","log","clearLayerMetaData","setLayerSettingForKey","applyTypographyStyles","color_red","color_blue","color_green","color_alpha","createAndGetSharedTextStyleFromJson","threadDictionary","NSThread","mainThread","browserWindow","CONSTS","options","identifier","width","height","panel","MDPanel","scheduleWithInterval_jsFunction","loadSettingsToWebview","defaultOptions","assign","initilize","Panel","NSPanel","init","colorWhite","NSColor","frame","NSMakeRect","titleBgColor","contentBgColor","fiber","createFiber","webViewRect","contentView","WebView","closeButton","standardWindowButton","NSWindowCloseButton","titlebarView","superview","titlebarViewController","view","titlebarContainerView","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","setHidden","NSWindowMiniaturizeButton","NSWindowZoomButton","setFrame_display","setBackgroundColor","setWorksWhenModal","mainWindowFrame","mainWindow","mainWindowWidth","Number","size","mainWindowHeight","frameOrgin","NSMakePoint","setFrameOrigin","makeKeyAndOrderFront","nil","becomeKeyWindow","setLevel","NSFloatingWindowLevel","setWantsLayer","setFrame","setMainFrameURL_","addSubview","windowObject","MochaJSDelegate","webFrame","request","mainFrameURL","fragment","firstMouseAcceptor","sketchData","JSON","parse","decodeURI","valueForKey","Icons","Components","Colors","Type","FakeData","Elevation","Metadata","setFrameLoadDelegate_","getClassInstance","self","wantsStop","close","removeObjectForKey","cleanup","setAction","setFrameSize","NSMakeSize","setTransparent","SKETCH_47_JSON_FORMAT_VERSION","stringFromData","NSString","initWithData_encoding","NSUTF8StringEncoding","dataFromString","string","stringWithString","dataUsingEncoding","wrapArchiveDataInHeader","archiveData","archiveJSONString","archiveJSData","headerJSData","createArchiveHeaderJSData","root","archiveWithHeaderJSONString","stringify","object","MSImmutableLayer","new","archiveWithHeaderData","MSJSONDataArchiver","archivedDataWithHeaderAndRootObject","archiveWithHeaderJSData","sketchObjectFromArchiveJSONUsingFormatVersion","jsonString","formatVersion","MSJSONDataUnarchiver","unarchiveObjectWithString_asVersion_corruptionDetected_error","recurseThroughLayers","fn","l","getSharedStylesFromContainer","layerStyledUsed","sharedObject","sharedStyleID","archiveDataFromSketchObject","includeDependencies","document","documentData","MSPasteboardLayersBase","usedSymbolsInContainer_document","MSLayerArray","arrayWithLayer","isSubclassOfClass","NSSet","symbolsDict","NSMutableDictionary","documentSymbols","getDocumentSymbols","$","allObjects","setObject_forKey","styles","NSDictionary","dictionaryWithDictionary","immutableObject","archiver","setArchiveObjectIDs","archivedDataWithRootObject_error","jsData","err","MSKeyedUnarchiver","unarchiveObjectWithData_asVersion_corruptionDetected_error","_class","version","createCocoaObject","methods","superclass","uniqueClassName","NSUUID","UUID","UUIDString","classDesc","MOClassDescription","allocateDescriptionForClassWithName_superclass_","NSObject","registerClass","selectorString","selector","NSSelectorFromString","addInstanceMethodWithSelector_function","NSClassFromString","module","exports","button","evt","removeFromSuperview","NSApplication","sharedApplication","sendEvent","NSButton","setIdentifier","setTranslatesAutoresizingMaskIntoConstraints","views","addConstraints","NSLayoutConstraint","constraintsWithVisualFormat_options_metrics_views","NSLayoutFormatDirectionLeadingToTrailing","constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant","NSLayoutAttributeTop","NSLayoutRelationEqual","selectorHandlerDict","delegateClassDesc","handlers","setHandlerForSelector","func","handlerHasBeenSet","args","regex","exec","dynamicFunction","eval","join","addInstanceMethodWithSelector_function_","removeHandlerForSelector","getHandlerForSelector","getAllHandlers","getClass","ArrayUtils","ClassUtils","ColorUtils","DocUtils","DomUtils","StyleUtils","SymbolUtils","UiUtils","PathUtils","SettingsUtils","find","format","container","returnArray","key","match","predicate","NSPredicate","predicateWithFormat","items","pages","MSSharedStyleContainer","MSSharedTextStyleContainer","objectsSortedByName","children","queryResult","filteredArrayUsingPredicate","collection","iterator","item","objectAtIndex","returnValue","map","transform","result","mapObject","results","value","filter","theClass","klass","immutableSketchObject","immutableClass","mutableClass","initWithImmutableModelObject","hex","toHex","c","parseInt","substring","rgba","replace","split","parseFloat","cssColorToMSColor","page","currentPage","artboard","currentArtboard","allLayers","allSymbols","rect","round","maxX","maxY","val","addGroup","MSLayerGroup","addShape","MSShapeGroup","shapeWithRect","addText","text","parentGroup","getPluginCachePath","cachePath","String","NSFileManager","defaultManager","URLsForDirectory_inDomains_","NSCachesDirectory","NSUserDomainMask","path","pluginCacheKey","__command","pluginBundle","mkdirpSync","mode","MOPointer","fileManager","createDirectoryAtPath_withIntermediateDirectories_attributes_error","NSFilePosixPermissions","Error","hasComponentData","ele","layerSettingForKey","clearLayerMetaDataForKeys","setValue_forKey_onLayer","userInfo","settingsJSON","meta","k","getSharedTextStyleByName","allTextStyles","MSSharedStyle","id","layerStyleWithID","textStyleWithID","getSharedLayerStyleByName","allLayerStyles","layerStyles","hasTextStyle","layerTextStyles","addSharedObject","addSharedStylesToDocByName","s","initWithName_style","json","fontFamily","font","lineHeight","fontSize","leading","alignment","spacing","paragraphSpacing","textTransform","strikethrough","underline","setFontPostscriptName","setLeading","setLineHeight","setFontSize","setTextAlignment","textAlignment","setCharacterSpacing","addAttribute_value","paragraphStyle","setParagraphSpacing","applyFillsToStyle","styleFill","isEnabled","applyShadowsToStyle","shadows","shadow","styleShadow","offsetX","offsetY","blurRadius","blur","spread","applyBordersToStyle","styleBorder","thickness","position","MSStyle","contextSettings","setOpacity","symbolName","targetSymbols","targetSymbol","isEqualToString","symbolId","symbolWithID","symbolDoc","symbolsPageOrCreateIfNecessary","addLayer","colorBg","colorBgRect","arrayWithLayers","canCreateSymbolFromLayers","showMessage"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,mBAAO,CAAC,yEAAoB;;AAElD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,8BAA8B;AACpE;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,yBAAyB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,qBAAqB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,aAAa;AACvB;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,WAAW;AACX;AACA,qCAAqC;AACrC;AACA;AACA,SAAS;AACT;AACA;AACA,gDAAgD;AAChD;AACA,WAAW;AACX;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,cAAc;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AC1gBA,WAAW,mBAAO,CAAC,kBAAM;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBA;AAAe;AACbA,UAAQ,EAAE,6BADG;AAEb;AACAC,SAAO,EAAE,wBAHI;AAIbC,sBAAoB,EAAE,yCAJT;AAKbC,eAAa,EAAE;AALF,CAAf,E;;;;;;;;;;;;ACAA;AAAA;AAAA;AAEe,2EAAW;AACxB,MAAIC,eAAe,GAAG,SA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","file":"settings.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/panels/settings.js\");\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar sketchSpecifics = require('./sketch-specifics')\n\n// we only expose the posix implementation since Sketch only runs on macOS\n\nvar CHAR_FORWARD_SLASH = 47\nvar CHAR_DOT = 46\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString(path, allowAboveRoot) {\n  var res = ''\n  var lastSegmentLength = 0\n  var lastSlash = -1\n  var dots = 0\n  var code\n  for (var i = 0; i <= path.length; i += 1) {\n    if (i < path.length) code = path.charCodeAt(i)\n    else if (code === CHAR_FORWARD_SLASH) break\n    else code = CHAR_FORWARD_SLASH\n    if (code === CHAR_FORWARD_SLASH) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (\n          res.length < 2 ||\n          lastSegmentLength !== 2 ||\n          res.charCodeAt(res.length - 1) !== CHAR_DOT ||\n          res.charCodeAt(res.length - 2) !== CHAR_DOT\n        ) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/')\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = ''\n                lastSegmentLength = 0\n              } else {\n                res = res.slice(0, lastSlashIndex)\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/')\n              }\n              lastSlash = i\n              dots = 0\n              continue\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = ''\n            lastSegmentLength = 0\n            lastSlash = i\n            dots = 0\n            continue\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) res += '/..'\n          else res = '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (res.length > 0) res += '/' + path.slice(lastSlash + 1, i)\n        else res = path.slice(lastSlash + 1, i)\n        lastSegmentLength = i - lastSlash - 1\n      }\n      lastSlash = i\n      dots = 0\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots\n    } else {\n      dots = -1\n    }\n  }\n  return res\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root\n  var base =\n    pathObject.base || (pathObject.name || '') + (pathObject.ext || '')\n  if (!dir) {\n    return base\n  }\n  if (dir === pathObject.root) {\n    return dir + base\n  }\n  return dir + sep + base\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = ''\n    var resolvedAbsolute = false\n    var cwd\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i -= 1) {\n      var path\n      if (i >= 0) {\n        path = arguments[i]\n      } else {\n        if (cwd === undefined) {\n          cwd = posix.dirname(sketchSpecifics.cwd())\n        }\n        path = cwd\n      }\n\n      path = sketchSpecifics.getString(path, 'path')\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue\n      }\n\n      resolvedPath = path + '/' + resolvedPath\n      resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute)\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) return '/' + resolvedPath\n      else return '/'\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath\n    } else {\n      return '.'\n    }\n  },\n\n  normalize: function normalize(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    if (path.length === 0) return '.'\n\n    var isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    var trailingSeparator =\n      path.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH\n\n    // Normalize the path\n    path = normalizeString(path, !isAbsolute)\n\n    if (path.length === 0 && !isAbsolute) path = '.'\n    if (path.length > 0 && trailingSeparator) path += '/'\n\n    if (isAbsolute) return '/' + path\n    return path\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    return path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH\n  },\n\n  join: function join() {\n    if (arguments.length === 0) return '.'\n    var joined\n    for (var i = 0; i < arguments.length; i += 1) {\n      var arg = arguments[i]\n      arg = sketchSpecifics.getString(arg, 'path')\n      if (arg.length > 0) {\n        if (joined === undefined) joined = arg\n        else joined += '/' + arg\n      }\n    }\n    if (joined === undefined) return '.'\n    return posix.normalize(joined)\n  },\n\n  relative: function relative(from, to) {\n    from = sketchSpecifics.getString(from, 'from path')\n    to = sketchSpecifics.getString(to, 'to path')\n\n    if (from === to) return ''\n\n    from = posix.resolve(from)\n    to = posix.resolve(to)\n\n    if (from === to) return ''\n\n    // Trim any leading backslashes\n    var fromStart = 1\n    for (; fromStart < from.length; fromStart += 1) {\n      if (from.charCodeAt(fromStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var fromEnd = from.length\n    var fromLen = fromEnd - fromStart\n\n    // Trim any leading backslashes\n    var toStart = 1\n    for (; toStart < to.length; toStart += 1) {\n      if (to.charCodeAt(toStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var toEnd = to.length\n    var toLen = toEnd - toStart\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen\n    var lastCommonSep = -1\n    var i = 0\n    for (; i <= length; i += 1) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1)\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i)\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0\n          }\n        }\n        break\n      }\n      var fromCode = from.charCodeAt(fromStart + i)\n      var toCode = to.charCodeAt(toStart + i)\n      if (fromCode !== toCode) break\n      else if (fromCode === CHAR_FORWARD_SLASH) lastCommonSep = i\n    }\n\n    var out = ''\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; i += 1) {\n      if (i === fromEnd || from.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n        if (out.length === 0) out += '..'\n        else out += '/..'\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0) return out + to.slice(toStart + lastCommonSep)\n    else {\n      toStart += lastCommonSep\n      if (to.charCodeAt(toStart) === CHAR_FORWARD_SLASH) toStart += 1\n      return to.slice(toStart)\n    }\n  },\n\n  toNamespacedPath: function toNamespacedPath(path) {\n    // Non-op on posix systems\n    return path\n  },\n\n  dirname: function dirname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    if (path.length === 0) return '.'\n    var code = path.charCodeAt(0)\n    var hasRoot = code === CHAR_FORWARD_SLASH\n    var end = -1\n    var matchedSlash = true\n    for (var i = path.length - 1; i >= 1; i -= 1) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        if (!matchedSlash) {\n          end = i\n          break\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.'\n    if (hasRoot && end === 1) return '//'\n    return path.slice(0, end)\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined)\n      ext = sketchSpecifics.getString(ext, 'ext')\n    path = sketchSpecifics.getString(path, 'path')\n\n    var start = 0\n    var end = -1\n    var matchedSlash = true\n    var i\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return ''\n      var extIdx = ext.length - 1\n      var firstNonSlashEnd = -1\n      for (i = path.length - 1; i >= 0; i -= 1) {\n        var code = path.charCodeAt(i)\n        if (code === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false\n            firstNonSlashEnd = i + 1\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1\n              end = firstNonSlashEnd\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd\n      else if (end === -1) end = path.length\n      return path.slice(start, end)\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false\n          end = i + 1\n        }\n      }\n\n      if (end === -1) return ''\n      return path.slice(start, end)\n    }\n  },\n\n  extname: function extname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      return ''\n    }\n    return path.slice(startDot, end)\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new Error('pathObject should be an Object')\n    }\n    return _format('/', pathObject)\n  },\n\n  parse: function parse(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' }\n    if (path.length === 0) return ret\n    var code = path.charCodeAt(0)\n    var isAbsolute = code === CHAR_FORWARD_SLASH\n    var start\n    if (isAbsolute) {\n      ret.root = '/'\n      start = 1\n    } else {\n      start = 0\n    }\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    var i = path.length - 1\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end)\n        else ret.base = ret.name = path.slice(startPart, end)\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot)\n        ret.base = path.slice(1, end)\n      } else {\n        ret.name = path.slice(startPart, startDot)\n        ret.base = path.slice(startPart, end)\n      }\n      ret.ext = path.slice(startDot, end)\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1)\n    else if (isAbsolute) ret.dir = '/'\n\n    return ret\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null,\n}\n\nposix.posix = posix\n\nmodule.exports = posix\n","var util = require('util')\n\nmodule.exports.getString = function getString(path, argumentName) {\n  if (!util.isString(path)) {\n    // let's make a special case for NSURL\n    if (util.getNativeClass(path) === 'NSURL') {\n      return String(path.path().copy())\n    }\n    throw new Error(argumentName + ' should be a string. Got ' + typeof path + ' instead.')\n  }\n  return String(path)\n}\n\nmodule.exports.cwd = function cwd() {\n  if (typeof __command !== 'undefined' && __command.script() && __command.script().URL()) {\n    return String(__command.script().URL().path().copy())\n  }\n  return String(MSPluginManager.defaultPluginURL().path().copy())\n}\n","export default {\n  pluginId: \"com.google.material2.active\",\n  // baseURL: 'https://google-com-sketch-material.firebaseapp.com/',\n  baseURL: 'http://localhost:8082/',\n  layerSettingsPanelId: 'com.gsid.sketch.material.layer.settings',\n  stylesPanelId: 'com.gsid.sketch.material.styles.13121'\n}\n","import Utils from \"../utils\";\n\nexport default function() {\n  var _setBorderColor = function(layer, color) {\n    var layerClass = layer.class();\n    if (\n      layerClass == \"MSRectangleShape\" ||\n      layerClass == \"MSOvalShape\" ||\n      layerClass == \"MSTriangleShape\" ||\n      layerClass == \"MSStarShape\" ||\n      layerClass == \"MSPolygonShape\"\n    ) {\n      var borders = layer.style().enabledBorders();\n      if (borders.count() > 0 && borders.lastObject().fillType() == 0) {\n        borders.lastObject().setColor(color);\n      } else {\n        var border = layer.style().addStylePartOfType(1);\n        border.setFillType(0);\n        border.setColor(color);\n        border.setPosition(2);\n        border.setThickness(1);\n      }\n    }\n  };\n\n  var _fillIcon = function(symbolInstance, color, rawColor) {\n    Utils.makeColorSymbol(color, rawColor.color, 1, \"c/\" + rawColor.name);\n\n    var selectedSymbol = Utils.findSymbolByName(\"c/\" + rawColor.name);\n\n    symbolInstance.overridePoints().forEach(function(overridePoint) {\n      if (overridePoint.layerName() + \"\" == \"🎨 Color\") {\n        symbolInstance.setValue_forOverridePoint_(\n          selectedSymbol.symbolID(),\n          overridePoint\n        );\n      }\n    });\n\n    symbolInstance.isSelected = true;\n    symbolInstance.select_byExtendingSelection_showSelection(true, true, true);\n  };\n\n  var _setFillColor = function(layer, color, rawColor) {\n    var layerClass = layer.class();\n\n    if (layerClass == \"MSSymbolInstance\") {\n      _fillIcon(layer, color, rawColor);\n    }\n\n    if (\n      layerClass == \"MSRectangleShape\" ||\n      layerClass == \"MSOvalShape\" ||\n      layerClass == \"MSTriangleShape\" ||\n      layerClass == \"MSStarShape\" ||\n      layerClass == \"MSPolygonShape\"\n    ) {\n      var fills = layer.style().enabledFills();\n      if (fills.count() > 0 && fills.lastObject().fillType() == 0) {\n        fills.lastObject().setColor(color);\n      } else {\n        var fill = layer.style().addStylePartOfType(0);\n        fill.setFillType(0);\n        fill.setColor(color);\n      }\n    }\n\n    if (layer.class() == \"MSTextLayer\") {\n      layer.setTextColor(color);\n    }\n  };\n\n  var _applyColor = function(rawColor) {\n    var doc = NSDocumentController.sharedDocumentController().currentDocument();\n    var selection = doc.selectedLayers().layers();\n\n    if (selection.count() <= 0) {\n      Utils.message(\"Select a layer to apply color\");\n    } else {\n      var selecitonLoop = selection.objectEnumerator();\n      var sel;\n      while ((sel = selecitonLoop.nextObject())) {\n        var nsColor;\n\n        if (rawColor.color.startsWith(\"#\") > 0) {\n          nsColor = Utils.hexToMSColor(rawColor.color);\n        }\n\n        if (rawColor.color.startsWith(\"rgba\") > 0) {\n          nsColor = Utils.rgbaToMSColor(rawColor.color);\n        }\n\n        if (!nsColor) {\n          Utils.message(\"Can't find the color!\");\n          return;\n        }\n\n        if (rawColor.type == \"border\") {\n          _setBorderColor(sel, nsColor);\n        } else {\n          _setFillColor(sel, nsColor, rawColor);\n        }\n      }\n    }\n  };\n\n  var _addGlobalColors = function(colors) {\n    var MSColors = [];\n    for (var i = 0; i < colors.length; i++) {\n      if (typeof colors[i] == \"string\") {\n        MSColors.push(Utils.hexToMSColor(colors[i]));\n      } else {\n        MSColors.push(\n          MSColor.colorWithRed_green_blue_alpha(\n            colors[i].red,\n            colors[i].green,\n            colors[i].blue,\n            colors[i].alpha\n          )\n        );\n      }\n    }\n    var app = NSApp.delegate();\n    var assets = app.globalAssets();\n    assets.setColors(MSColors);\n    Utils.doc()\n      .inspectorController()\n      .closeAnyColorPopover();\n    app.refreshCurrentDocument();\n    Utils.doc().reloadInspector();\n\n    Utils.message(\n      \"✅ Colors added successfuly, Open color picker to see changes.\"\n    );\n  };\n\n  var _addGlobalSymbols = function(colorGroups) {\n    for (var group in colorGroups) {\n      for (var clr in colorGroups[group]) {\n        var color = colorGroups[group][clr];\n        Utils.makeColorSymbol(\n          Utils.hexToMSColor(color.color),\n          color.color,\n          1,\n          \"c/\" + color.name\n        );\n      }\n    }\n\n    var app = NSApp.delegate();\n    app.refreshCurrentDocument();\n    Utils.doc().reloadInspector();\n\n    Utils.message(\"✅ Color symbols added to your symbols page\");\n  };\n\n  var _pickColor = function(webView, clr) {\n    var btn = BCMagnifierButton.alloc().initWithFrame(NSZeroRect);\n    coscript.pushAsCurrentCOScript();\n    btn.setCOSJSTargetFunction(function(sender) {\n      var pickColor = sender.color();\n      var color = MSColor.colorWithRed_green_blue_alpha(\n        pickColor.red(),\n        pickColor.green(),\n        pickColor.blue(),\n        1\n      );\n      var hexValue = \"#\" + color.immutableModelObject().hexValue();\n      webView\n        .windowScriptObject()\n        .evaluateWebScript(\n          \"window.vm.$store.state.\" + clr + '= \"' + hexValue + '\";'\n        );\n    });\n    btn.performClick(Utils.context);\n  };\n\n  return {\n    applyColor: _applyColor,\n    addGlobalColors: _addGlobalColors,\n    addGlobalSymbols: _addGlobalSymbols,\n    pickColor: _pickColor\n  };\n}\n","import CONST from '../common/constants';\n\nimport Utils from \"../utils\";\nimport Archive from \"../utils/global/archive\";\n\nexport default function () {\n\n  let _convertImgToLayer = function (layerData) {\n\n    let url = CONST.baseURL + layerData.data;\n    var componentNSUrl = NSURL.URLWithString(url);\n    const componentData = NSData.dataWithContentsOfURL(componentNSUrl);\n    const component = Archive.sketchObjectFromArchiveData(componentData);\n\n    var selectedLayers = Utils.doc().selectedLayers();\n    let droppedElement = selectedLayers.firstLayer();\n    let droppedEleRect = Utils.getRect(droppedElement);\n\n\n    Utils.forEach(component.layers, function (e) {\n      var layer = Utils.mutableSketchObject(e)\n      layer.setObjectID(MSModelObjectCommon.generateObjectID());\n      let newLayerRect = Utils.getRect(layer);\n      newLayerRect.setX(droppedEleRect.x);\n      newLayerRect.setY(droppedEleRect.y);\n      Utils.current().addLayers([layer]);\n      Utils.current().removeLayer(droppedElement);\n    });\n\n    const symbolKeys = Object.keys(component.symbols);\n\n    for (var i = 0; i < symbolKeys.length; i++) {\n      let symbol = Utils.mutableSketchObject(component.symbols[symbolKeys[i]]);\n      symbol.setObjectID(symbolKeys[i]);\n      var existingSymbol = Utils.findSymbolById(symbol.objectID());\n      if (!existingSymbol) {\n        Utils.addSymbolToDoc(symbol);\n      }\n    }\n\n    const styleKeys = Object.keys(component.sharedStyles);\n    for (var i = 0; i < styleKeys.length; i++) {\n      let style = Utils.mutableSketchObject(component.sharedStyles[styleKeys[i]]);\n      style.setObjectID(styleKeys[i]);\n      var existingSharedStyle = Utils.getSharedStyleById(style.objectID());\n      if (!existingSharedStyle) {\n        Utils.addSharedStyleObjectToDoc(style);\n      }\n    }\n  }\n\n  return {\n    convertImgToLayer: _convertImgToLayer\n  };\n\n}\n","import Utils from \"../utils\";\n\nexport default {\n  shuffle(array) {\n    var currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n  },\n\n  applyFakeData(fakedata) {\n    var selection = Utils.selection();\n\n    if (selection.count() <= 0) {\n      Utils.message(\"Select a text layer first\");\n    } else {\n      var selecitonLoop = selection.objectEnumerator();\n      var shuffle = this.shuffle(fakedata.data);\n      var i = 0,\n        sel;\n\n      while ((sel = selecitonLoop.nextObject())) {\n        if (Utils.is(sel, MSTextLayer)) {\n          if (i > shuffle.length) i = 0;\n          sel.setStringValue(shuffle[i]);\n          i++;\n        }\n      }\n    }\n  }\n};\n","import Utils from \"../utils\";\n\nexport default {\n  applyElevation(elevation) {\n    var selection = Utils.selection();\n\n    var name = \"Elevation/\" + elevation;\n\n    if (elevation.name) {\n      name = \"Elevation/\" + elevation.name;\n    }\n\n    var elevationName = name;\n\n    if (selection.count() <= 0) {\n      Utils.message(\"Select a layer to apply the elevation\");\n      return false;\n    }\n\n    var style = Utils.createAndGetSharedLayerStyleFromJson(\n      elevationName,\n      elevation\n    );\n\n    for (var i = 0; i < selection.count(); i++) {\n      var target = selection[i];\n      target.sharedStyle = style;\n    }\n\n    Utils.doc().reloadInspector();\n  }\n};\n","import Utils from \"../utils\";\n\nexport default {\n  convertSvgToSymbol(data) {\n    var name = data.name;\n    var selectedLayers = Utils.doc().selectedLayers();\n    var existingSymbol = Utils.findSymbolByName(name);\n    var replaceColor, selectedSymbol;\n\n    if (data.colorValue) {\n      replaceColor = MSColor.colorWithRed_green_blue_alpha(\n        data.colorValue.r / 255,\n        data.colorValue.g / 255,\n        data.colorValue.b / 255,\n        data.colorValue.a\n      );\n\n      var prefix = \"c/\";\n\n      var ColorName =\n        data.colorName || prefix + data.colorHex + \"/\" + data.colorAlpha;\n\n      Utils.makeColorSymbol(\n        replaceColor,\n        data.colorHex,\n        data.colorAlpha,\n        ColorName\n      );\n\n      selectedSymbol = Utils.findSymbolByName(name);\n    }\n\n    if (existingSymbol) {\n      var newSymbol = existingSymbol.newSymbolInstance(),\n        newSymbolRect = Utils.getRect(newSymbol),\n        droppedElement = selectedLayers.firstLayer(),\n        droppedEleRect = Utils.getRect(droppedElement);\n\n      newSymbol.setConstrainProportions(true);\n\n      Utils.current().addLayers([newSymbol]);\n      newSymbolRect.setX(droppedEleRect.x);\n      newSymbolRect.setY(droppedEleRect.y);\n      Utils.current().removeLayer(droppedElement);\n\n      return;\n    }\n\n    if (data.colorValue && data.isGlif) {\n      var colorTHex = Utils.hexToNSColor(\"#80868B\", 1);\n      var colorBlack = MSColor.colorWithRed_green_blue_alpha(\n        colorTHex.r,\n        colorTHex.g,\n        colorTHex.b,\n        1\n      );\n\n      Utils.makeColorSymbol(colorBlack, \"#80868B\", 1, \"c/grey/600\");\n      const blackSymbol = Utils.findSymbolByName(\"c/grey/600\");\n      const blackSymbolInstance = blackSymbol.newSymbolInstance();\n      blackSymbolInstance.setName(\"🎨 Color\");\n      var sRect = Utils.getRect(blackSymbolInstance);\n      sRect.setHeight(24);\n      sRect.setWidth(24);\n\n      var draggedLayer = selectedLayers.firstLayer();\n\n      var subLayers = draggedLayer.layers();\n\n      for (var j = 0; j < subLayers.count(); j++) {\n        var layer = subLayers[j];\n        if (layer.style().hasEnabledFill() == 0) {\n          layer.removeFromParent();\n        }\n      }\n\n      subLayers = draggedLayer.layers();\n\n      for (var j = 0; j < subLayers.count(); j++) {\n        var layer = subLayers[j];\n        layer.style().removeAllStyleFills();\n        layer.hasClippingMask = true;\n      }\n\n      draggedLayer.addLayers([blackSymbolInstance]);\n    }\n\n    var symbolInstance = MSSymbolCreator.createSymbolFromLayers_withName_onSymbolsPage(\n      selectedLayers,\n      name,\n      true\n    );\n\n    var symbolInstanceRect = Utils.getRect(symbolInstance);\n    symbolInstanceRect.setConstrainProportions(true);\n\n    symbolInstance.overridePoints().forEach(function(overridePoint) {\n      if (overridePoint.layerName() + \"\" == \"🎨 Color\") {\n        symbolInstance.setValue_forOverridePoint_(\n          selectedSymbol.symbolID(),\n          overridePoint\n        );\n      }\n    });\n  }\n};\n","import Utils from \"../utils\";\nvar Settings = require(\"sketch/settings\");\n\nexport default {\n  updateLayerMetadata(data) {\n    log(data);\n    var selection = Utils.selection();\n\n    if (selection.count() <= 0) {\n      Utils.message(\"Select a layer first\");\n    } else {\n      var selecitonLoop = selection.objectEnumerator(),\n        sel, keys = Object.keys(data);\n\n      while ((sel = selecitonLoop.nextObject())) {\n        Utils.clearLayerMetaData(sel);\n        for (let i = 0; i < keys.length; i++) {\n          Settings.setLayerSettingForKey(sel, keys[i], data[keys[i]]);\n        }\n      }\n\n      Utils.doc().reloadInspector();\n    }\n  }\n};\n","import Utils from \"../utils\";\n\nexport default {\n  applyTypographyStyles(style) {\n    var selection = Utils.selection();\n\n    if (selection.count() <= 0) {\n      Utils.message(\"Select a text layer to apply style\");\n    } else {\n      style.color = {\n        red: style.color_red,\n        blue: style.color_blue,\n        green: style.color_green,\n        alpha: style.color_alpha\n      };\n\n      var style = Utils.createAndGetSharedTextStyleFromJson(style.name, style),\n        selecitonLoop = selection.objectEnumerator(),\n        sel;\n\n      while ((sel = selecitonLoop.nextObject())) {\n        sel.sharedStyle = style;\n      }\n\n      Utils.doc().reloadInspector();\n    }\n  }\n};\n","import {\n  MDPanel\n} from '../ui/panel';\nimport CONSTS from '../common/constants';\nimport Utils from '../utils';\n\nexport default function () {\n\n  let threadDictionary = NSThread.mainThread().threadDictionary();\n  let browserWindow = threadDictionary[CONSTS.layerSettingsPanelId];\n\n  if (!browserWindow) {\n    const options = {\n      identifier: CONSTS.layerSettingsPanelId,\n      width: 300,\n      height: 300,\n      url: CONSTS.baseURL + \"metadata\"\n    };\n\n    var panel = new MDPanel(options);\n    threadDictionary[CONSTS.layerSettingsPanelId] = panel;\n    browserWindow = threadDictionary[CONSTS.layerSettingsPanelId];\n  }\n\n  let selection = Utils.selection();\n\n\n  // First argument is a delay in seconds.\n  coscript.scheduleWithInterval_jsFunction(0.5, function () {\n    Utils.loadSettingsToWebview(selection, browserWindow);\n  });\n\n\n}\n","import MochaJSDelegate from \"../utils/global/mocha-js-delegate\";\nimport firstMouseAcceptor from \"../utils/global/first-mouse\";\nimport Icons from \"../components/icons\";\nimport Colors from \"../components/color\";\nimport Type from \"../components/type\";\nimport Elevation from \"../components/elevations\";\nimport FakeData from \"../components/data\";\nimport Metadata from \"../components/metadata\";\nimport Components from '../components/components';\n\nexport class MDPanel {\n  constructor(options) {\n    const defaultOptions = {\n      url: \"https://google.com\",\n      width: 320,\n      height: 512,\n      identifier: \"com.google.material.gsid\"\n    };\n\n    this.options = Object.assign({}, defaultOptions, options);\n    this.initilize(this.options);\n  }\n\n  initilize(options) {\n    const Panel = NSPanel.alloc().init(),\n      colorWhite = NSColor.colorWithRed_green_blue_alpha(1, 1, 1, 1),\n      frame = NSMakeRect(0, 0, options.width, options.height + 24),\n      titleBgColor = colorWhite,\n      contentBgColor = colorWhite,\n      threadDictionary = NSThread.mainThread().threadDictionary(),\n      fiber = coscript.createFiber(),\n      webViewRect = NSMakeRect(0, 0, this.options.width, this.options.height),\n      contentView = Panel.contentView(),\n      webView = WebView.alloc().initWithFrame(webViewRect),\n      closeButton = Panel.standardWindowButton(NSWindowCloseButton),\n      titlebarView = contentView\n      .superview()\n      .titlebarViewController()\n      .view(),\n      titlebarContainerView = titlebarView.superview();\n\n    // threadDictionary[this.options.identifier] = this;\n\n    Panel.setTitleVisibility(NSWindowTitleHidden);\n    Panel.setTitlebarAppearsTransparent(true);\n    Panel.standardWindowButton(NSWindowCloseButton).setHidden(false);\n    Panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n    Panel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n    Panel.setFrame_display(frame, true);\n    Panel.setBackgroundColor(contentBgColor);\n    Panel.setWorksWhenModal(true);\n\n    const mainWindowFrame = NSApp.mainWindow().frame();\n    const mainWindowWidth = Number(mainWindowFrame.size.width);\n    const mainWindowHeight = Number(mainWindowFrame.size.height);\n\n    let frameOrgin = NSMakePoint(mainWindowWidth - 240 - this.options.width, mainWindowHeight - 100 - this.options.height);\n    Panel.setFrameOrigin(frameOrgin)\n    Panel.makeKeyAndOrderFront(nil);\n\n    Panel.becomeKeyWindow();\n    Panel.setLevel(NSFloatingWindowLevel);\n\n    contentView.setWantsLayer(true);\n    contentView.layer().setFrame(contentView.frame());\n\n    webView.setBackgroundColor(contentBgColor);\n    webView.setMainFrameURL_(options.url);\n    contentView.addSubview(webView);\n    const windowObject = webView.windowScriptObject();\n\n    this.webView = webView;\n    this.windowObject = windowObject;\n\n    const delegate = new MochaJSDelegate({\n      \"webView:didChangeLocationWithinPageForFrame:\": function (\n        webView,\n        webFrame\n      ) {\n        const request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n        if (request) {\n\n          if (request == \"onWindowDidBlur\") {\n            firstMouseAcceptor(webView, contentView);\n          }\n\n          const sketchData = JSON.parse(\n            decodeURI(windowObject.valueForKey(\"_sketch_data\"))\n          );\n\n          if (request == \"drag-end\") {\n            Icons.convertSvgToSymbol(sketchData);\n          }\n\n          if (request == 'componentDragFinish') {\n            Components().convertImgToLayer(sketchData);\n          }\n\n          if (request == \"applyColor\") {\n            Colors().applyColor(sketchData);\n          }\n\n          if (request == \"addGlobalSymbols\") {\n            Colors().addGlobalSymbols(sketchData);\n          }\n\n          if (request == \"addGlobalColors\") {\n            Colors().addGlobalColors(sketchData);\n          }\n\n          if (request == \"pickColor\") {\n            Colors().pickColor(webView, sketchData);\n          }\n\n          if (request == \"applyStyles\") {\n            Type.applyTypographyStyles(sketchData);\n          }\n\n          if (request == \"applyFakeData\") {\n            FakeData.applyFakeData(sketchData);\n          }\n\n          if (request == \"applyElevations\") {\n            Elevation.applyElevation(sketchData);\n          }\n\n          if (request == \"updateLayerMetadata\") {\n            Metadata.updateLayerMetadata(sketchData);\n          }\n        }\n\n        windowObject.evaluateWebScript(\"window.location.hash = '';\");\n      }\n    });\n\n    webView.setFrameLoadDelegate_(delegate.getClassInstance());\n\n    closeButton.setCOSJSTargetFunction(function (sender) {\n      self.wantsStop = true;\n      Panel.close();\n\n      if (options.identifier) {\n        threadDictionary.removeObjectForKey(options.identifier);\n        fiber.cleanup();\n      }\n    });\n    closeButton.setAction(\"callAction:\");\n\n    closeButton.setFrameOrigin(NSMakePoint(8, 0));\n    titlebarContainerView.setFrame(\n      NSMakeRect(0, options.height, options.width, 24)\n    );\n    titlebarView.setFrameSize(NSMakeSize(options.width, 24));\n    titlebarView.setTransparent(true);\n    titlebarView.setBackgroundColor(titleBgColor);\n    titlebarContainerView.superview().setBackgroundColor(titleBgColor);\n  }\n}\n","import doc from '../modules/doc';\nimport $ from '../modules/array';\n\nconst SKETCH_47_JSON_FORMAT_VERSION = 95;\nexport default {\n  stringFromData(data) {\n    return NSString.alloc().initWithData_encoding(data, NSUTF8StringEncoding);\n  },\n\n  dataFromString(string) {\n    return NSString.stringWithString(string).dataUsingEncoding(NSUTF8StringEncoding);\n  },\n\n  wrapArchiveDataInHeader(archiveData) {\n    const archiveJSONString = this.stringFromData(archiveData);\n    const archiveJSData = JSON.parse(archiveJSONString);\n    const headerJSData = this.createArchiveHeaderJSData();\n    headerJSData.root = archiveJSData;\n    const archiveWithHeaderJSONString = JSON.stringify(headerJSData);\n    return this.dataFromString(archiveWithHeaderJSONString);\n  },\n\n  createArchiveHeaderJSData() {\n    // Creating a header directly with MSArchiveHeader.new()\n    // results in a header with no properties --- not what we\n    // want. Instead, export a stub object and use the header\n    // from that.\n    const object = MSImmutableLayer.new();\n    const archiveWithHeaderData = MSJSONDataArchiver.archivedDataWithHeaderAndRootObject(object);\n    const archiveWithHeaderJSONString = this.stringFromData(archiveWithHeaderData);\n    const archiveWithHeaderJSData = JSON.parse(archiveWithHeaderJSONString);\n    delete archiveWithHeaderJSData.root;\n    return archiveWithHeaderJSData;\n  },\n\n  // Unarchive with a known version of the JSON format.\n  sketchObjectFromArchiveJSONUsingFormatVersion(jsonString, formatVersion) {\n    return MSJSONDataUnarchiver.unarchiveObjectWithString_asVersion_corruptionDetected_error(\n      jsonString,\n      formatVersion,\n      null,\n      null\n    );\n  },\n\n  recurseThroughLayers(root, fn) {\n    fn(root)\n    if (root.layers && root.layers()) {\n      root.layers().forEach(l => this.recurseThroughLayers(l, fn))\n    }\n  },\n\n  getSharedStylesFromContainer(layer) {\n    let layerStyledUsed = {};\n    this.recurseThroughLayers(layer, l => {\n      let sharedObject = l.sharedObject();\n      if (sharedObject) {\n        layerStyledUsed[\"\" + l.sharedStyleID()] = sharedObject.immutableModelObject();\n      }\n    });\n    return layerStyledUsed;\n  },\n\n  archiveDataFromSketchObject(object, options) {\n    if (options && options.includeDependencies) {\n      if (!options.document) {\n        throw 'Options must include \"document\" when \"includeDependencies\" is true';\n      }\n      const documentData = options.document.documentData();\n\n      let symbols = MSPasteboardLayersBase.usedSymbolsInContainer_document(\n        MSLayerArray.arrayWithLayer(object),\n        documentData\n      );\n\n      let sharedStyles = {};\n\n      // In Sketch 48 the symbols are returned as a set of\n      // ids, but what we need is a map of those ids to the\n      // symbols themselves.\n      if (symbols.class().isSubclassOfClass(NSSet)) {\n        const symbolsDict = NSMutableDictionary.new();\n        const documentSymbols = doc.getDocumentSymbols();\n        $.forEach(symbols.allObjects(), (symbolID) => {\n          const symbol = documentSymbols[symbolID].immutableModelObject();\n          symbolsDict.setObject_forKey(symbol, symbolID);\n          const styles = this.getSharedStylesFromContainer(documentSymbols[symbolID]);\n          sharedStyles = Object.assign(sharedStyles, styles)\n        });\n        symbols = symbolsDict;\n      }\n\n      object = NSDictionary.dictionaryWithDictionary({\n        layers: [object.immutableModelObject()],\n        symbols: symbols,\n        sharedStyles: sharedStyles\n      });\n\n    }\n\n    const immutableObject = object.immutableModelObject();\n\n    const archiver = MSJSONDataArchiver.new();\n    archiver.setArchiveObjectIDs(true);\n    const archiveData = archiver.archivedDataWithRootObject_error(immutableObject, null);\n\n    return this.wrapArchiveDataInHeader(archiveData);\n  },\n\n  sketchObjectFromArchiveData(archiveData) {\n    if (archiveData && archiveData.class().isSubclassOfClass(NSData)) {\n      const jsonString = this.stringFromData(archiveData);\n\n      // The default format version to use is the one exported\n      // by Sketch 47. This is the last version for which we\n      // did not store the format version so we would know\n      // what to use when unarchiving. This is not exact\n      // because of course customers do not always upgrade at\n      // the same time, but because of backwards compatibility\n      // going back several format versions, it is fine.\n      var formatVersion = SKETCH_47_JSON_FORMAT_VERSION;\n\n      var jsData;\n      try {\n        jsData = JSON.parse(jsonString);\n      } catch (err) {\n        jsData = null; // No-op.\n      }\n\n      if (!jsData) {\n        // Format is not JSON, use the keyed unarchiver.\n        return MSKeyedUnarchiver.unarchiveObjectWithData_asVersion_corruptionDetected_error(\n          archiveData,\n          formatVersion,\n          null,\n          null\n        );\n      }\n\n      if (jsData._class === 'MSArchiveHeader') {\n        // If there is a wrapping header, take the format\n        // version from it.\n        formatVersion = jsData.version;\n\n        // Also unwrap the archive data from the header\n        // because the header throws Sketch off even though it\n        // contains the correct version information.\n        jsData = jsData.root;\n      }\n\n      return this.sketchObjectFromArchiveJSONUsingFormatVersion(\n        JSON.stringify(jsData),\n        formatVersion\n      );\n\n    } else {\n      // Object has already been unarchived.\n      return archiveData;\n    }\n  },\n\n}\n","var createCocoaObject = function (methods, superclass) {\n  var uniqueClassName = 'MD.sketch_' + NSUUID.UUID().UUIDString()\n  var classDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(\n    uniqueClassName,\n    superclass || NSObject\n  )\n  classDesc.registerClass()\n  for (var selectorString in methods) {\n    var selector = NSSelectorFromString(selectorString)\n    classDesc.addInstanceMethodWithSelector_function(\n      selector,\n      methods[selectorString]\n    )\n  }\n  return NSClassFromString(uniqueClassName).new()\n}\n\nmodule.exports = function (webView, contentView) {\n\n  var button = createCocoaObject({\n      'mouseDown:': function (evt) {\n        this.removeFromSuperview()\n        NSApplication.sharedApplication().sendEvent(evt)\n      },\n    },\n    NSButton\n  )\n\n  button.setIdentifier('firstMouseAcceptor')\n  button.setTransparent(true)\n  button.setTranslatesAutoresizingMaskIntoConstraints(false)\n\n  contentView.addSubview(button)\n\n  var views = {\n    button: button,\n    webView: webView,\n  }\n\n  contentView.addConstraints(\n    NSLayoutConstraint.constraintsWithVisualFormat_options_metrics_views(\n      'V:[button(==webView)]',\n      NSLayoutFormatDirectionLeadingToTrailing,\n      null,\n      views\n    )\n  )\n\n\n  contentView.addConstraints(\n    NSLayoutConstraint.constraintsWithVisualFormat_options_metrics_views(\n      'H:[button(==webView)]',\n      NSLayoutFormatDirectionLeadingToTrailing,\n      null,\n      views\n    )\n  )\n\n  contentView.addConstraints(\n    [NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(\n      button,\n      NSLayoutAttributeTop,\n      NSLayoutRelationEqual,\n      webView,\n      NSLayoutAttributeTop,\n      1,\n      0\n    )]\n  )\n}\n","module.exports = function(selectorHandlerDict, superclass) {\n  var uniqueClassName =\n    \"MochaJSDelegate_DynamicClass_\" + NSUUID.UUID().UUIDString();\n\n  var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(\n    uniqueClassName,\n    superclass || NSObject\n  );\n\n  delegateClassDesc.registerClass();\n\n  // Storage Handlers\n  var handlers = {};\n\n  // Define interface\n  this.setHandlerForSelector = function(selectorString, func) {\n    var handlerHasBeenSet = selectorString in handlers;\n    var selector = NSSelectorFromString(selectorString);\n\n    handlers[selectorString] = func;\n\n    /*\n      For some reason, Mocha acts weird about arguments: https://github.com/logancollins/Mocha/issues/28\n      We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n    */\n    if (!handlerHasBeenSet) {\n      var args = [];\n      var regex = /:/g;\n      while (regex.exec(selectorString)) {\n        args.push(\"arg\" + args.length);\n      }\n\n      var dynamicFunction = eval(\n        \"(function (\" +\n          args.join(\", \") +\n          \") { return handlers[selectorString].apply(this, arguments); })\"\n      );\n\n      delegateClassDesc.addInstanceMethodWithSelector_function_(\n        selector,\n        dynamicFunction\n      );\n    }\n  };\n\n  this.removeHandlerForSelector = function(selectorString) {\n    delete handlers[selectorString];\n  };\n\n  this.getHandlerForSelector = function(selectorString) {\n    return handlers[selectorString];\n  };\n\n  this.getAllHandlers = function() {\n    return handlers;\n  };\n\n  this.getClass = function() {\n    return NSClassFromString(uniqueClassName);\n  };\n\n  this.getClassInstance = function() {\n    return NSClassFromString(uniqueClassName).new();\n  };\n\n  // Convenience\n  if (typeof selectorHandlerDict === \"object\") {\n    for (var selectorString in selectorHandlerDict) {\n      this.setHandlerForSelector(\n        selectorString,\n        selectorHandlerDict[selectorString]\n      );\n    }\n  }\n};\n","import ArrayUtils from './modules/array'\nimport ClassUtils from './modules/class'\nimport ColorUtils from './modules/color'\nimport DocUtils from './modules/doc'\nimport DomUtils from './modules/dom'\nimport StyleUtils from './modules/styles'\nimport SymbolUtils from './modules/symbol'\nimport UiUtils from './modules/ui'\nimport PathUtils from './modules/path'\nimport SettingsUtils from './modules/settings'\n\nconst Utils = Object.assign({},\n  ArrayUtils,\n  ClassUtils,\n  ColorUtils,\n  DocUtils,\n  DomUtils,\n  StyleUtils,\n  SymbolUtils,\n  UiUtils,\n  PathUtils,\n  SettingsUtils\n)\n\nexport default Utils;\n","import ClassUtils from \"./class\";\n\nexport default {\n  find(format, container, returnArray) {\n    if (!format || !format.key || !format.match) {\n      return false;\n    }\n    var predicate = NSPredicate.predicateWithFormat(format.key, format.match),\n      container = container || this.current,\n      items;\n\n    if (container.pages) {\n      items = container.pages();\n    } else if (\n      ClassUtils.is(container, MSSharedStyleContainer) ||\n      ClassUtils.is(container, MSSharedTextStyleContainer)\n    ) {\n      items = container.objectsSortedByName();\n    } else if (container.children) {\n      items = container.children();\n    } else {\n      items = container;\n    }\n\n    var queryResult = items.filteredArrayUsingPredicate(predicate);\n\n    if (returnArray) return queryResult;\n\n    if (queryResult.count() == 1) {\n      return queryResult[0];\n    } else if (queryResult.count() > 0) {\n      return queryResult;\n    } else {\n      return false;\n    }\n  },\n\n  forEach(collection, iterator) {\n    for (var i = 0; i < collection.count(); i++) {\n      const item = collection.objectAtIndex(i);\n      const returnValue = iterator(item, i, collection);\n      if (returnValue === false) {\n        break;\n      }\n    }\n  },\n\n  map(collection, transform) {\n    const result = [];\n    this.forEach(collection, function (item, i, collection) {\n      result.push(transform(item, i, collection));\n    });\n    return result;\n  },\n\n  mapObject(collection, transform) {\n    const results = {};\n    this.forEach(collection, function (item, i, collection) {\n      const result = transform(item, i, collection);\n      const key = result[0];\n      const value = result[1];\n      results[key] = value;\n    });\n    return results;\n  },\n\n  find(collection, predicate) {\n    var result;\n    this.forEach(collection, function (item, i, collection) {\n      if (predicate(item, i, collection)) {\n        result = item;\n        return false;\n      }\n    });\n    return result;\n  },\n\n  filter(collection, predicate) {\n    const result = [];\n    this.forEach(collection, function (item, i, collection) {\n      if (predicate(item, i, collection)) {\n        result.push(item);\n      }\n    });\n    return result;\n  }\n};\n","export default {\n  is: function (layer, theClass) {\n    if (!layer) return false;\n    var klass = layer.class();\n    return klass === theClass;\n  },\n  mutableSketchObject(immutableSketchObject) {\n    if (immutableSketchObject && immutableSketchObject.class) {\n      const immutableClass = immutableSketchObject.class();\n      if (immutableClass.mutableClass) {\n        const mutableClass = immutableClass.mutableClass();\n        return mutableClass.new().initWithImmutableModelObject(\n          immutableSketchObject\n        );\n      }\n    }\n  }\n};\n","export default {\n  hexToNSColor: function(hex, alpha) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? {\n          r: this.toHex(result[1]) / 255,\n          g: this.toHex(result[2]) / 255,\n          b: this.toHex(result[3]) / 255,\n          a: alpha || 1\n        }\n      : null;\n  },\n  toHex: function(c) {\n    var hex = parseInt(c, 16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n  },\n  hexToMSColor(hex) {\n    var r = parseInt(hex.substring(1, 3), 16) / 255,\n      g = parseInt(hex.substring(3, 5), 16) / 255,\n      b = parseInt(hex.substring(5, 7), 16) / 255,\n      a = 1;\n    return MSColor.colorWithRed_green_blue_alpha(r, g, b, a);\n  },\n  rgbaToMSColor: function(rgba) {\n    rgba = rgba.replace(\"rgba(\", \"\").replace(\")\", \"\");\n    rgba = rgba.split(\",\");\n\n    var r = parseFloat(rgba[0]) / 255,\n      g = parseFloat(rgba[1]) / 255,\n      b = parseFloat(rgba[2]) / 255,\n      a = parseFloat(rgba[3]);\n\n    return MSColor.colorWithRed_green_blue_alpha(r, g, b, a);\n  },\n  cssColorToMSColor: function(color) {\n    if (color.type == \"hex\") {\n      return this.hexToMSColor(color.value);\n    }\n    if (color.type == \"rgba\") {\n      return this.rgbaToMSColor(color.value);\n    }\n  }\n};\n","import $ from './array';\n\nexport default {\n  doc() {\n    const document = NSDocumentController.sharedDocumentController().currentDocument();\n    return document;\n  },\n  current() {\n    const doc = this.doc(),\n      page = doc.currentPage(),\n      artboard = page.currentArtboard();\n\n    return artboard || page;\n  },\n  selection() {\n    return this.doc()\n      .selectedLayers()\n      .layers();\n  },\n  allLayers() {\n    return this.current().children();\n  },\n  getDocumentSymbols() {\n    const symbols = this.doc().documentData().allSymbols();\n    return $.mapObject(symbols, function (symbol) {\n      return [symbol.symbolID(), symbol];\n    });\n  }\n};\n","export default {\n  getRect: function(layer) {\n    var rect = layer.frame();\n    return {\n      x: Math.round(rect.x()),\n      y: Math.round(rect.y()),\n      width: Math.round(rect.width()),\n      height: Math.round(rect.height()),\n      maxX: Math.round(rect.x() + rect.width()),\n      maxY: Math.round(rect.y() + rect.height()),\n      setX(x) {\n        rect.setX(x);\n        this.x = x;\n        this.maxX = this.x + this.width;\n      },\n      setY(y) {\n        rect.setY(y);\n        this.y = y;\n        this.maxY = this.y + this.height;\n      },\n      setWidth(width) {\n        rect.setWidth(width);\n        this.width = width;\n        this.maxX = this.x + this.width;\n      },\n      setHeight(height) {\n        rect.setHeight(height);\n        this.height = height;\n        this.maxY = this.y + this.height;\n      },\n      setConstrainProportions(val) {\n        rect.setConstrainProportions(val);\n      }\n    };\n  },\n  addGroup: function() {\n    return MSLayerGroup.new();\n  },\n  addShape: function() {\n    return MSShapeGroup.shapeWithRect(NSMakeRect(0, 0, 100, 100));\n  },\n  addText: function(container, string) {\n    var text = MSTextLayer.new();\n    text.setStringValue(string || \"Text\");\n    return text;\n  },\n  removeLayer: function(layer) {\n    var container = layer.parentGroup();\n    if (container) container.removeLayer(layer);\n  }\n};\n","import path from '@skpm/path';\n\nexport default {\n  getPluginCachePath() {\n    let cachePath = String(NSFileManager.defaultManager().URLsForDirectory_inDomains_(\n      NSCachesDirectory,\n      NSUserDomainMask)[0].path());\n    let pluginCacheKey = String(__command.pluginBundle().identifier()); // TODO: escape if needed\n    // return path.join(cachePath, pluginCacheKey);\n    return '/Users/gsid/work/projects/side/sketch-material/internal/gen/public/static/l/gm';\n  },\n  mkdirpSync(path, mode) {\n    mode = mode || 0o777;\n    let err = MOPointer.alloc().init();\n    let fileManager = NSFileManager.defaultManager();\n    fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error(path, true, {\n      NSFilePosixPermissions: mode\n    }, err);\n\n    if (err.value() !== null) {\n      throw new Error(err.value());\n    }\n  }\n}\n","var Settings = require(\"sketch/settings\");\nimport CONSTS from '../../common/constants';\n\nexport default {\n  hasComponentData(ele) {\n    return Settings.layerSettingForKey(ele, 'component');\n  },\n  clearLayerMetaDataForKeys(ele, keys) {\n    keys.forEach((key) => {\n      // Settings.setLayerSettingForKey(ele, key, undefined);\n      __command.setValue_forKey_onLayer(nil, key, ele);\n    })\n  },\n  clearLayerMetaData(ele) {\n    if (!ele.userInfo()) return;\n    const settingsJSON = ele.userInfo()[CONSTS.pluginId] || [];\n    const keys = Object.keys(settingsJSON);\n    this.clearLayerMetaDataForKeys(ele, keys);\n  },\n  loadSettingsToWebview(selection, browserWindow) {\n    var selecitonLoop = selection.objectEnumerator(),\n      sel;\n\n    while ((sel = selecitonLoop.nextObject())) {\n      var settingsJSON = sel.userInfo()[CONSTS.pluginId] || [];\n\n      const meta = Object.keys(settingsJSON).map((k) => {\n        return {\n          key: k,\n          value: Settings.layerSettingForKey(sel, k)\n        };\n      });\n\n      browserWindow.windowObject.evaluateWebScript(\n        `window.vm.$store.state.layerMetadata=${JSON.stringify(meta)};`\n      );\n    }\n  }\n\n}\n","import ClassUtils from \"./class\";\nimport DocUtils from \"./doc\";\nimport DomUtils from \"./dom\";\nimport ArrayUtils from \"./array\";\nimport ColorUtils from \"./color\";\n\nexport default {\n  getSharedTextStyleByName(name) {\n    var sharedStyles = DocUtils.doc()\n      .documentData()\n      .allTextStyles();\n    var style = ArrayUtils.find({\n        key: \"(name != NULL) && (name == %@)\",\n        match: name\n      },\n      sharedStyles\n    );\n    style = !style || ClassUtils.is(style, MSSharedStyle) ? style : style[0];\n    return style;\n  },\n  getSharedStyleById(id) {\n    let documentData = DocUtils.doc().documentData();\n    let style = documentData.layerStyleWithID(id) || documentData.textStyleWithID(id);\n    return style;\n  },\n  getSharedLayerStyleByName: function (name) {\n    var sharedStyles = DocUtils.doc()\n      .documentData()\n      .allLayerStyles();\n    var style = ArrayUtils.find({\n        key: \"(name != NULL) && (name == %@)\",\n        match: name\n      },\n      sharedStyles\n    );\n    style = !style || ClassUtils.is(style, MSSharedStyle) ? style : style[0];\n    return style;\n  },\n  addSharedStyleObjectToDoc(style) {\n    let container = DocUtils.doc()\n      .documentData()\n      .layerStyles();\n\n    if (style.style().hasTextStyle()) {\n      container = DocUtils.doc().documentData().layerTextStyles();\n    }\n\n    container.addSharedObject(style);\n  },\n  addSharedStylesToDocByName(name, style, type) {\n    let container = DocUtils.doc()\n      .documentData()\n      .layerTextStyles();\n    if (type == \"layer\") {\n      container = DocUtils.doc()\n        .documentData()\n        .layerStyles();\n    }\n    const s = MSSharedStyle.alloc().initWithName_style(name, style);\n    container.addSharedObject(s);\n  },\n  createAndGetSharedTextStyleFromJson(name, json) {\n    var style = this.getSharedTextStyleByName(name);\n\n    if (style == 0 && json.color) {\n      var color = MSColor.colorWithRed_green_blue_alpha(\n          json.color.red,\n          json.color.green,\n          json.color.blue,\n          json.color.alpha\n        ),\n        fontFamily = json.font || \"Roboto\",\n        lineHeight = json.lineHeight || 15,\n        fontSize = json.size || 13,\n        leading = json.leading || 0,\n        alignment = json.alignment || 0,\n        spacing = json.spacing || 0,\n        paragraphSpacing = json.paragraphSpacing || 0,\n        textTransform = json.textTransform || 0,\n        strikethrough = json.strikethrough || 0,\n        underline = json.underline || 0,\n        text = this.addText(this.page);\n\n      text.setFontPostscriptName(fontFamily);\n      text.setLeading(leading);\n      text.setLineHeight(lineHeight);\n      text.setFontSize(fontSize);\n      text.setTextAlignment(alignment);\n      text.setTextColor(color);\n      text.textAlignment = alignment;\n      text.setCharacterSpacing(spacing);\n      text.addAttribute_value(\n        \"MSAttributedStringTextTransformAttribute\",\n        textTransform\n      );\n\n      var paragraphStyle = text.paragraphStyle();\n      paragraphStyle.setParagraphSpacing(paragraphSpacing);\n      text.addAttribute_value(\"NSParagraphStyle\", paragraphStyle);\n      text.addAttribute_value(\"NSStrikethrough\", strikethrough);\n      text.addAttribute_value(\"NSUnderline\", underline);\n\n      style = text.style();\n\n      this.addSharedStylesToDocByName(name, style, \"text\");\n      DomUtils.removeLayer(text);\n    }\n\n    return this.getSharedTextStyleByName(name);\n  },\n\n  applyFillsToStyle(style, fills) {\n    for (var i = 0; i < fills.length; i++) {\n      var fill = fills[i];\n      var color = ColorUtils.cssColorToMSColor(fill.color);\n      var styleFill = style.addStylePartOfType(0);\n      styleFill.setFillType(fill.type);\n      styleFill.color = color;\n      styleFill.isEnabled = true;\n    }\n  },\n\n  applyShadowsToStyle(style, shadows) {\n    for (var i = 0; i < shadows.length; i++) {\n      var shadow = shadows[i];\n      var color = ColorUtils.cssColorToMSColor(shadow.color);\n      var styleShadow = style.addStylePartOfType(2);\n\n      styleShadow.offsetX = shadow.x;\n      styleShadow.offsetY = shadow.y;\n      styleShadow.color = color;\n      styleShadow.blurRadius = shadow.blur;\n      styleShadow.spread = shadow.spread;\n      styleShadow.isEnabled = true;\n    }\n  },\n\n  applyBordersToStyle(style, borders) {\n    for (var i = 0; i < borders.length; i++) {\n      var border = borders[i];\n      var color = ColorUtils.cssColorToMSColor(border.color);\n      var styleBorder = style.addStylePartOfType(1);\n\n      styleBorder.color = color;\n      styleBorder.thickness = border.thickness;\n      styleBorder.position = border.position;\n    }\n  },\n\n  createAndGetSharedLayerStyleFromJson(name, json) {\n    var style = this.getSharedLayerStyleByName(name);\n\n    if (style == 0) {\n      style = MSStyle.alloc().init();\n      if (json.fills) this.applyFillsToStyle(style, json.fills);\n      if (json.shadows) this.applyShadowsToStyle(style, json.shadows);\n      if (json.borders) this.applyBordersToStyle(style, json.borders);\n      style.contextSettings().setOpacity(1);\n      this.addSharedStylesToDocByName(name, style, \"layer\");\n    }\n\n    return this.getSharedLayerStyleByName(name);\n  }\n};\n","import DocUtils from './doc';\nimport DomUtils from './dom';\n\nexport default {\n  findSymbolByName(symbolName) {\n    var targetSymbols = DocUtils.doc()\n      .documentData()\n      .allSymbols();\n    for (var j = 0; j < targetSymbols.count(); j++) {\n      var targetSymbol = targetSymbols.objectAtIndex(j);\n      if (targetSymbol.name().isEqualToString(symbolName)) {\n        return targetSymbol;\n      }\n    }\n    return false;\n  },\n  findSymbolById(symbolId) {\n    return DocUtils.doc().documentData().symbolWithID(symbolId);\n  },\n  addSymbolToDoc(symbol) {\n    let symbolDoc = DocUtils.doc()\n      .documentData()\n      .symbolsPageOrCreateIfNecessary();\n    symbolDoc.addLayer(symbol);\n  },\n  makeColorSymbol: function (color, colorHex, colorAlpha, name) {\n    if (this.findSymbolByName(name)) {\n      return;\n    }\n\n    DocUtils.doc()\n      .documentData()\n      .symbolsPageOrCreateIfNecessary();\n\n    var colorBg = DomUtils.addShape();\n    var colorBgRect = DomUtils.getRect(colorBg);\n\n    colorBgRect.setHeight(10);\n    colorBgRect.setWidth(10);\n\n    if (colorBg.class() == \"MSShapeGroup\") {\n      var fills = colorBg.style().enabledFills();\n      if (fills.count() > 0 && fills.lastObject().fillType() == 0) {\n        fills.lastObject().setColor(color);\n      } else {\n        var fill = colorBg.style().addStylePartOfType(0);\n        fill.setFillType(0);\n        fill.setColor(color);\n      }\n    }\n\n    var layers = MSLayerArray.arrayWithLayers([colorBg]);\n\n    DocUtils.current().addLayers(layers);\n\n    if (MSSymbolCreator.canCreateSymbolFromLayers(layers)) {\n      var symbolName = name;\n      var symbolInstance = MSSymbolCreator.createSymbolFromLayers_withName_onSymbolsPage(\n        layers,\n        symbolName,\n        true\n      );\n      var symbolInstanceRect = DomUtils.getRect(symbolInstance);\n      symbolInstanceRect.setConstrainProportions(true);\n      symbolInstance.removeFromParent();\n    }\n  }\n};\n","import DocUtils from \"./doc\";\n\nexport default {\n  message(message) {\n    DocUtils.doc().showMessage(message);\n  }\n};\n","module.exports = require(\"sketch/settings\");","module.exports = require(\"util\");"],"sourceRoot":""}